(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{710:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},988:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var s=t(7876),i=t(4232),d=t(2934),o=t(1040),l=t(7685),r=t(710);t(3727);var n=t(672),c=t(9142),u=t(5450),h=t(2089),v=t(1111),_=t(5612);let p=(0,t(1713).A)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);t(8230);var m=t(8084),x=t.n(m);function b(){var e,a;let{data:t}=(0,d.useSession)(),[m,b]=(0,i.useState)([]),[g,y]=(0,i.useState)("all"),[j,I]=(0,i.useState)({title:"",description:"",tags:[],collegeId:""}),[N,f]=(0,i.useState)(!1),[A,C]=(0,i.useState)(null),[B,k]=(0,i.useState)(!1),[w,S]=(0,i.useState)(!1),[P,R]=(0,i.useState)(null),[F,T]=(0,i.useState)({college:"all",sort:"recent",search:""});(0,i.useEffect)(()=>{M()},[F]);let M=async()=>{try{let e=await o.A.get("/api/ideas",{params:F,headers:{Accept:"application/json"}});if(e.data.success)b(e.data.ideas||[]);else throw Error(e.data.message)}catch(t){var e,a;l.oR.error((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to load ideas")}},D=async e=>{C(e),k(!0)},E=async e=>{try{let a=await o.A.get("/api/users/".concat(e));a.data.success&&(R(a.data.user),S(!0))}catch(e){l.oR.error("Failed to load user profile")}},H=async e=>{try{let a=await o.A.post("/api/chat/create",{recipientId:e});a.data.success&&(window.location.href="/chat?conversation=".concat(a.data.conversationId))}catch(e){l.oR.error("Failed to start conversation")}},z=e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(a){return e}},U=async e=>{var a,s,i,d,r,n;if(e.preventDefault(),!(null==t?void 0:t.user)){l.oR.error("Please sign in to submit ideas");return}if(q())try{f(!0);let e=null===(a=t.user)||void 0===a?void 0:a.id,i=null===(s=t.user)||void 0===s?void 0:s.collegeId;if(!e||!i){l.oR.error("Session error: Missing user information. Please sign in again.");return}let d={title:j.title.trim(),description:j.description.trim(),postedBy:e,collegeId:i,tags:Array.isArray(j.tags)?j.tags:[]};console.log("Submitting idea:",d),(await o.A.post("/api/ideas",d)).data.success&&(l.oR.success("Idea submitted successfully!"),I({title:"",description:"",tags:[]}),M())}catch(e){console.error("Submit idea error:",{message:e.message,response:null===(i=e.response)||void 0===i?void 0:i.data,status:null===(d=e.response)||void 0===d?void 0:d.status}),l.oR.error((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to submit idea")}finally{f(!1)}},q=()=>{var e,a,s;return(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)?(null===(a=j.title)||void 0===a?void 0:a.trim())?(null===(s=j.description)||void 0===s?void 0:s.trim())?j.title.length>100?(l.oR.error("Title is too long (max 100 characters)"),!1):!(j.description.length>2e3)||(l.oR.error("Description is too long (max 2000 characters)"),!1):(l.oR.error("Please enter a description"),!1):(l.oR.error("Please enter a title"),!1):(l.oR.error("Please sign in to submit ideas"),!1)},G=async(e,a)=>{if(a&&a.stopPropagation(),!(null==t?void 0:t.user)){l.oR.error("Please sign in to upvote ideas");return}try{let a=await o.A.patch("/api/ideas/".concat(e,"/upvote"),{userId:t.user.id});a.data.success&&(await M(),l.oR.success(a.data.message))}catch(e){var s,i;console.error("Error updating vote:",e),l.oR.error((null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to update vote")}},L=m.filter(e=>{if("my-ideas"===g){var a,s;return(null===(a=e.postedBy)||void 0===a?void 0:a._id)===(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id)}return!0}),O=async(e,a)=>{if(a.stopPropagation(),confirm("Are you sure you want to delete this idea?"))try{(await o.A.delete("/api/ideas/".concat(e))).data.success&&(l.oR.success("Idea deleted successfully"),M())}catch(e){l.oR.error("Failed to delete idea")}};return(0,s.jsxs)("div",{className:x().ideaHubContainer,children:[(0,s.jsx)(l.l$,{position:"top-center"}),(0,s.jsx)("h1",{className:x().ideaHubTitle,children:"IdeaHub"}),(0,s.jsxs)("div",{className:x().filters,children:[(0,s.jsxs)("div",{className:x().filterGroup,children:[(0,s.jsx)("select",{value:F.college,onChange:e=>T({...F,college:e.target.value}),className:x().filterSelect,children:(0,s.jsx)("option",{value:"all",children:"All Colleges"})}),(0,s.jsxs)("select",{value:F.sort,onChange:e=>T({...F,sort:e.target.value}),className:x().filterSelect,children:[(0,s.jsx)("option",{value:"recent",children:"Most Recent"}),(0,s.jsx)("option",{value:"popular",children:"Most Popular"})]})]}),(0,s.jsx)("input",{type:"search",placeholder:"Search ideas...",value:F.search,onChange:e=>T({...F,search:e.target.value}),className:x().searchInput})]}),(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.role)==="student"&&(0,s.jsxs)("form",{onSubmit:U,className:x().ideaForm,children:[(0,s.jsx)("h2",{className:x().formTitle,children:"Share Your Idea"}),(0,s.jsxs)("div",{className:x().formGroup,children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter idea title",value:j.title,onChange:e=>I({...j,title:e.target.value.slice(0,100)}),className:x().inputField,disabled:N,required:!0}),(0,s.jsxs)("div",{className:x().charCount,children:[j.title.length,"/100 characters"]})]}),(0,s.jsx)("div",{className:x().formGroup,children:(0,s.jsx)("textarea",{placeholder:"Enter idea description",value:j.description,onChange:e=>I({...j,description:e.target.value}),className:x().inputField,disabled:N,required:!0,rows:"4"})}),(0,s.jsx)("div",{className:x().formGroup,children:(0,s.jsx)("input",{type:"text",placeholder:"Add tags (comma separated)",value:j.tags.join(", "),onChange:e=>I({...j,tags:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),className:x().inputField,disabled:N})}),(0,s.jsx)("button",{type:"submit",disabled:N,className:x().submitButton,children:N?(0,s.jsxs)("div",{className:x().spinnerContainer,children:[(0,s.jsx)("div",{className:x().spinner}),(0,s.jsx)("span",{children:"Submitting..."})]}):"Share Idea"})]}),(null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.role)==="student"&&(0,s.jsxs)("div",{className:x().tabs,children:[(0,s.jsx)("button",{className:"".concat(x().tabButton," ").concat("all"===g?x().activeTab:""),onClick:()=>y("all"),children:"All Ideas"}),(0,s.jsx)("button",{className:"".concat(x().tabButton," ").concat("my-ideas"===g?x().activeTab:""),onClick:()=>y("my-ideas"),children:"My Ideas"})]}),(0,s.jsx)("div",{className:x().ideasGrid,children:L.length>0?L.map(e=>{var a,i,d,o,n,c,u,m,b,g,y,j;return(0,s.jsxs)("div",{className:x().ideaCard,onClick:()=>D(e),children:[(0,s.jsxs)("div",{className:x().cardHeader,children:[(0,s.jsxs)("div",{className:x().authorInfo,children:[(0,s.jsx)("div",{className:x().avatarContainer,children:(null===(a=e.postedBy)||void 0===a?void 0:a.avatar)?(0,s.jsx)("img",{src:e.postedBy.avatar,alt:e.postedBy.name||"User",className:x().authorAvatar}):(0,s.jsx)("div",{className:x().avatarPlaceholder,children:((null===(d=e.postedBy)||void 0===d?void 0:null===(i=d.name)||void 0===i?void 0:i[0])||"U").toUpperCase()})}),(0,s.jsxs)("div",{className:x().authorDetails,children:[(0,s.jsx)("span",{className:x().authorName,children:(null===(o=e.postedBy)||void 0===o?void 0:o.name)||"Anonymous"}),(0,s.jsxs)("span",{className:x().postedDate,children:[(0,s.jsx)(r.A,{size:14}),z(e.createdAt)]})]})]}),(0,s.jsx)("div",{className:x().cardActions,children:(null===(n=e.postedBy)||void 0===n?void 0:n._id)===(null==t?void 0:null===(c=t.user)||void 0===c?void 0:c.id)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:a=>O(e._id,a),className:"".concat(x().iconButton," ").concat(x().deleteButton),title:"Delete idea",children:(0,s.jsx)(h.A,{size:18})}),(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),handleEdit(e)},className:"".concat(x().iconButton," ").concat(x().editButton),title:"Edit idea",children:(0,s.jsx)(v.A,{size:18})})]})})]}),(0,s.jsxs)("div",{className:x().cardContent,children:[(0,s.jsx)("h3",{className:x().ideaTitle,children:e.title}),(0,s.jsxs)("p",{className:x().ideaDescription,children:[e.description.substring(0,150),e.description.length>150&&"..."]})]}),(0,s.jsxs)("div",{className:x().cardFooter,children:[(0,s.jsx)("div",{className:x().tagsList,children:null===(u=e.tags)||void 0===u?void 0:u.map((e,a)=>(0,s.jsx)("span",{className:x().tag,children:e},a))}),(0,s.jsxs)("div",{className:x().footerActions,children:[(0,s.jsx)("button",{className:"".concat(x().iconButton," ").concat(x().shareButton),onClick:a=>{a.stopPropagation(),navigator.clipboard.writeText(window.location.origin+"/ideas/".concat(e._id)),l.oR.success("Link copied to clipboard!")},title:"Share idea",children:(0,s.jsx)(_.A,{size:18})}),(0,s.jsxs)("button",{className:"".concat(x().iconButton," ").concat(x().upvoteButton," ").concat((null===(b=e.upvotedBy)||void 0===b?void 0:b.includes(null==t?void 0:null===(m=t.user)||void 0===m?void 0:m.id))?x().upvoted:""),onClick:a=>G(e._id,a),title:(null===(y=e.upvotedBy)||void 0===y?void 0:y.includes(null==t?void 0:null===(g=t.user)||void 0===g?void 0:g.id))?"Remove upvote":"Upvote idea",disabled:!(null==t?void 0:t.user),children:[(0,s.jsx)(p,{size:18}),(0,s.jsx)("span",{className:x().upvoteCount,children:(null===(j=e.upvotes)||void 0===j?void 0:j.length)||0})]})]})]})]},e._id)}):(0,s.jsx)("div",{className:x().noIdeas,children:(0,s.jsx)("p",{children:"my-ideas"===g?"You haven't posted any ideas yet":"No ideas found"})})}),B&&A&&(0,s.jsx)(e=>{var a,i,d,o,l,r;let{idea:h,onClose:v}=e;return(0,s.jsx)("div",{className:x().modalOverlay,onClick:v,children:(0,s.jsxs)("div",{className:x().modal,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{className:x().closeButton,onClick:v,children:(0,s.jsx)(n.A,{size:20})}),(0,s.jsxs)("div",{className:x().modalContent,children:[(0,s.jsx)("h2",{className:x().modalTitle,children:h.title}),(0,s.jsx)("p",{className:x().modalDescription,children:h.description}),(null===(a=h.tags)||void 0===a?void 0:a.length)>0&&(0,s.jsx)("div",{className:x().tagsList,children:h.tags.map((e,a)=>(0,s.jsx)("span",{className:x().tag,children:e},a))}),(0,s.jsxs)("div",{className:x().modalMeta,children:[(0,s.jsxs)("div",{className:x().authorInfo,children:[(0,s.jsx)("div",{className:x().avatarContainer,children:(null===(i=h.postedBy)||void 0===i?void 0:i.avatar)?(0,s.jsx)("img",{src:h.postedBy.avatar,alt:h.postedBy.name,className:x().authorAvatar}):(0,s.jsx)("div",{className:x().avatarPlaceholder,children:((null===(o=h.postedBy)||void 0===o?void 0:null===(d=o.name)||void 0===d?void 0:d[0])||"U").toUpperCase()})}),(0,s.jsxs)("div",{className:x().authorDetails,children:[(0,s.jsx)("span",{className:x().authorName,children:null===(l=h.postedBy)||void 0===l?void 0:l.name}),(0,s.jsx)("span",{className:x().postedDate,children:z(h.createdAt)})]})]}),(null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.role)==="alumni"&&(0,s.jsxs)("div",{className:x().modalActions,children:[(0,s.jsxs)("button",{onClick:()=>{var e;return E(null===(e=h.postedBy)||void 0===e?void 0:e._id)},className:x().actionButton,children:["View Profile ",(0,s.jsx)(c.A,{size:16})]}),(0,s.jsxs)("button",{onClick:()=>{var e;return H(null===(e=h.postedBy)||void 0===e?void 0:e._id)},className:x().actionButton,children:["Message ",(0,s.jsx)(u.A,{size:16})]})]})]})]})]})})},{idea:A,onClose:()=>k(!1)}),w&&P&&(0,s.jsx)(ProfileModal,{profile:P,onClose:()=>S(!1)})]})}},1111:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},2089:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3727:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4099:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ideahub",function(){return t(988)}])},5450:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},5612:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},8084:e=>{e.exports={ideaHubContainer:"Ideahub_ideaHubContainer__45cBS",ideaHubTitle:"Ideahub_ideaHubTitle__j8BRk",fadeIn:"Ideahub_fadeIn__k4PP_",filters:"Ideahub_filters__w72_3",filterGroup:"Ideahub_filterGroup__SdQWw",filterSelect:"Ideahub_filterSelect__UNtSm",searchInput:"Ideahub_searchInput__Rf7kU",ideasGrid:"Ideahub_ideasGrid__YJqJ8",ideaCard:"Ideahub_ideaCard__UWwmA",ideaTitle:"Ideahub_ideaTitle__GmiwY",ideaDescription:"Ideahub_ideaDescription__icWzy",ideaMeta:"Ideahub_ideaMeta__05s3O",authorInfo:"Ideahub_authorInfo__2_f_1",avatarContainer:"Ideahub_avatarContainer__9Oq86",authorAvatar:"Ideahub_authorAvatar__jbv18",avatarPlaceholder:"Ideahub_avatarPlaceholder__xPe23",authorName:"Ideahub_authorName__62wfJ",datePosted:"Ideahub_datePosted__pKAgN",tagsList:"Ideahub_tagsList__AOAPY",tag:"Ideahub_tag__hJlq2",modalOverlay:"Ideahub_modalOverlay__cN3Ew",modal:"Ideahub_modal__br_2h",modalFadeIn:"Ideahub_modalFadeIn__zEx5c",modalContent:"Ideahub_modalContent__lgNP_",ideaForm:"Ideahub_ideaForm__wm79V",inputField:"Ideahub_inputField__ZF40I",charCount:"Ideahub_charCount__ktgVx",spinnerContainer:"Ideahub_spinnerContainer__R2mze",spinner:"Ideahub_spinner__UBuZ4",spin:"Ideahub_spin__BSosF",noIdeas:"Ideahub_noIdeas__uuDLg",iconButton:"Ideahub_iconButton__fnH37",deleteButton:"Ideahub_deleteButton__744GE",editButton:"Ideahub_editButton__TV4C_",shareButton:"Ideahub_shareButton__dWlnE",upvoteButton:"Ideahub_upvoteButton__fWokA",upvoted:"Ideahub_upvoted__6gHp8",upvoteCount:"Ideahub_upvoteCount__VImPt",postedDate:"Ideahub_postedDate__yzhyA",authorDetails:"Ideahub_authorDetails__vecYL",upvotedIcon:"Ideahub_upvotedIcon__1UwjD",submitButton:"Ideahub_submitButton__hhsOL",formTitle:"Ideahub_formTitle__K2klA",formGroup:"Ideahub_formGroup__U2K0T",tabs:"Ideahub_tabs__YF7nm",tabButton:"Ideahub_tabButton__WcoTR",activeTab:"Ideahub_activeTab__mIum_",cardHeader:"Ideahub_cardHeader__NNL5s",cardContent:"Ideahub_cardContent__jNz8w",cardFooter:"Ideahub_cardFooter__2VjRa",footerActions:"Ideahub_footerActions__U8Jq4",cardActions:"Ideahub_cardActions__ixvAS"}},9142:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[290,40,636,593,792],()=>a(4099)),_N_E=e.O()}]);