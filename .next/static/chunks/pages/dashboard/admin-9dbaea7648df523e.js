(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24],{2089:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2963:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(1713).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},3727:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(1713).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5245:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>A});var r=s(7876),n=s(4232),i=s(2934),t=s(9099),d=s(7685),o=s(6248),l=s(9516),c=s(9252),h=s(7396);let u=(0,s(1713).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var _=s(2089),m=s(2963),p=s(3727),g=s(6407),v=s.n(g);function A(){var e,a,s;let g=(0,t.useRouter)(),{data:A,status:x}=(0,i.useSession)({required:!0,onUnauthenticated(){g.push("/auth/login")}}),[j,b]=(0,n.useState)([]),[f,N]=(0,n.useState)(!0),[D,y]=(0,n.useState)(null),[k,C]=(0,n.useState)(""),[S,w]=(0,n.useState)("all"),[I,R]=(0,n.useState)({page:1,limit:10,total:0,pages:0});(0,n.useEffect)(()=>{var e;if("loading"===x)return;if((null==A?void 0:null===(e=A.user)||void 0===e?void 0:e.role)!=="admin"){g.push("/dashboard");return}let a=setTimeout(()=>{T()},500);return()=>clearTimeout(a)},[A,x,k,S,I.page]);let T=async()=>{try{N(!0);let e=new URLSearchParams({role:S,search:k,page:I.page.toString(),limit:I.limit.toString()}),a=await fetch("/api/admin/users?".concat(e)),s=await a.json();if(!a.ok||!s.success)throw Error(s.message||"Failed to fetch users");b(s.users),R(e=>({...e,total:s.pagination.total,pages:s.pagination.pages}))}catch(e){console.error("Error fetching users:",e),d.oR.error(e.message)}finally{N(!1)}},B=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let a=await fetch("/api/admin/users",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}),s=await a.json();if(!a.ok)throw Error(s.message||"Failed to delete user");d.oR.success("User deleted successfully"),T()}catch(e){console.error("Error deleting user:",e),d.oR.error(e.message)}};return"loading"===x||f?(0,r.jsxs)("div",{className:v().loadingContainer,children:[(0,r.jsx)("div",{className:v().spinner}),(0,r.jsx)("p",{children:"Loading..."})]}):D?(0,r.jsxs)("div",{className:v().errorContainer,children:[(0,r.jsxs)("p",{className:v().errorMessage,children:["Error: ",D]}),(0,r.jsx)("button",{className:v().retryButton,onClick:T,children:"Retry"})]}):(0,r.jsxs)("div",{className:v().container,children:[(0,r.jsx)("div",{className:v().header,children:(0,r.jsxs)("div",{className:v().collegeInfo,children:[(0,r.jsx)(o.A,{size:24}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:v().collegeName,children:(null==A?void 0:null===(e=A.user)||void 0===e?void 0:e.collegeName)||"College Admin Dashboard"}),(0,r.jsxs)("p",{className:v().adminInfo,children:["Welcome, ",null==A?void 0:null===(a=A.user)||void 0===a?void 0:a.name," (",null==A?void 0:null===(s=A.user)||void 0===s?void 0:s.role,")"]})]})]})}),(0,r.jsxs)("div",{className:v().controls,children:[(0,r.jsxs)("div",{className:v().search,children:[(0,r.jsx)(l.A,{size:20}),(0,r.jsx)("input",{type:"text",placeholder:"Search users...",value:k,onChange:e=>C(e.target.value),className:v().searchInput})]}),(0,r.jsxs)("div",{className:v().filter,children:[(0,r.jsx)(c.A,{size:20}),(0,r.jsxs)("select",{value:S,onChange:e=>w(e.target.value),className:v().filterSelect,children:[(0,r.jsx)("option",{value:"all",children:"All Users"}),(0,r.jsx)("option",{value:"student",children:"Students"}),(0,r.jsx)("option",{value:"alumni",children:"Alumni"})]})]})]}),(0,r.jsx)("div",{className:v().content,children:0===j.length?(0,r.jsxs)("div",{className:v().emptyState,children:[(0,r.jsx)(h.A,{size:48}),(0,r.jsx)("h3",{children:"No Users Found"}),(0,r.jsx)("p",{children:"No users match your current filters."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:v().usersGrid,children:j.map(e=>{var a;return(0,r.jsxs)("div",{className:v().userCard,children:[(0,r.jsxs)("div",{className:v().userInfo,children:[(0,r.jsx)("div",{className:v().userAvatar,children:(null===(a=e.profile)||void 0===a?void 0:a.avatar)?(0,r.jsx)("img",{src:e.profile.avatar,alt:e.username}):(0,r.jsx)("div",{className:v().avatarPlaceholder,children:e.username[0].toUpperCase()})}),(0,r.jsxs)("div",{className:v().userDetails,children:[(0,r.jsx)("h3",{children:e.username}),(0,r.jsx)("p",{children:e.email}),(0,r.jsx)("span",{className:"".concat(v().userRole," ").concat(v()[e.role]),children:e.role})]})]}),(0,r.jsxs)("div",{className:v().userActions,children:[(0,r.jsx)("button",{className:v().editButton,onClick:()=>g.push("/dashboard/admin/users/".concat(e._id)),children:(0,r.jsx)(u,{size:16})}),(0,r.jsx)("button",{className:v().deleteButton,onClick:()=>B(e._id),children:(0,r.jsx)(_.A,{size:16})})]})]},e._id)})}),(0,r.jsxs)("div",{className:v().pagination,children:[(0,r.jsxs)("button",{className:v().paginationButton,disabled:1===I.page,onClick:()=>R(e=>({...e,page:e.page-1})),children:[(0,r.jsx)(m.A,{size:20}),"Previous"]}),(0,r.jsxs)("span",{className:v().paginationInfo,children:["Page ",I.page," of ",I.pages]}),(0,r.jsxs)("button",{className:v().paginationButton,disabled:I.page===I.pages,onClick:()=>R(e=>({...e,page:e.page+1})),children:["Next",(0,r.jsx)(p.A,{size:20})]})]})]})})]})}},6354:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/admin",function(){return s(5245)}])},6407:e=>{e.exports={container:"AdminDashboard_container__5Y4Z8",header:"AdminDashboard_header__bWPvL",collegeInfo:"AdminDashboard_collegeInfo__pnPw8",collegeName:"AdminDashboard_collegeName__XBmPo",adminInfo:"AdminDashboard_adminInfo__Kzpyp",headerRight:"AdminDashboard_headerRight__QeRZT",currentTime:"AdminDashboard_currentTime__KOign",currentUser:"AdminDashboard_currentUser__7_joT",statsGrid:"AdminDashboard_statsGrid__Z4zKW",statCard:"AdminDashboard_statCard__UIj_W",tabs:"AdminDashboard_tabs__mwUbz",tab:"AdminDashboard_tab__rgiRB",activeTab:"AdminDashboard_activeTab__SRJ6T",controls:"AdminDashboard_controls__T1VKp",search:"AdminDashboard_search__ORMdo",filter:"AdminDashboard_filter__jg8Lu",content:"AdminDashboard_content__dqpXO",emptyState:"AdminDashboard_emptyState__o82Ih",loadingContainer:"AdminDashboard_loadingContainer__aKSTt",spinner:"AdminDashboard_spinner__p_PKn",spin:"AdminDashboard_spin__Adlk2",usersGrid:"AdminDashboard_usersGrid__quHNH",userCard:"AdminDashboard_userCard__PpItB",userInfo:"AdminDashboard_userInfo__rFI_X",userAvatar:"AdminDashboard_userAvatar__JUmDg",userDetails:"AdminDashboard_userDetails__Oh3VF",userRole:"AdminDashboard_userRole__2JTHe",userActions:"AdminDashboard_userActions__SC_6_",editButton:"AdminDashboard_editButton__cj6pk",deleteButton:"AdminDashboard_deleteButton__I_gF2",pagination:"AdminDashboard_pagination__pGfZs",paginationButton:"AdminDashboard_paginationButton__RWj1p",paginationInfo:"AdminDashboard_paginationInfo__VgDJh"}},9099:(e,a,s)=>{e.exports=s(8253)},9252:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(1713).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},9516:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(1713).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(6354)),_N_E=e.O()}]);