"use strict";(()=>{var e={};e.id=3604,e.ids=[3604],e.modules={2992:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6037),a=r.n(n);let i=new(a()).Schema({title:{type:String,required:[!0,"Please provide an event title"],trim:!0},description:{type:String,required:[!0,"Please provide an event description"],trim:!0},date:{type:Date,required:[!0,"Please provide an event date"]},location:{type:String,default:"TBA"},type:{type:String,enum:["In-Person","Virtual","Hybrid"],default:"In-Person"},category:{type:String,enum:["tech","cultural","academic","sports","workshop","other"],default:"other"},capacity:{type:Number,default:null},registrationLink:{type:String,required:[!0,"Please provide a registration link"],trim:!0},image:{type:String,default:""},tags:[{type:String,trim:!0}],organizer:{type:String,required:[!0,"Please provide an organizer name"],trim:!0},userId:{type:String,required:[!0,"Please provide a user ID"]},createdAt:{type:Date,default:Date.now},status:{type:String,enum:["upcoming","ongoing","completed","cancelled"],default:"upcoming"},attendees:{type:Number,default:0}});i.index({date:1,category:1,status:1});let o=a().models.Event||a().model("Event",i)},3480:(e,t,r)=>{e.exports=r(5600)},3759:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(6037),a=r.n(n);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable in .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let s=async function(){return o.conn||(o.promise||(o.promise=a().connect(i).then(e=>e)),o.conn=await o.promise),o.conn}},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},7139:(e,t,r)=>{r.r(t),r.d(t,{config:()=>c,default:()=>d,routeModule:()=>p});var n={};r.r(n),r.d(n,{default:()=>l});var a=r(3480),i=r(8667),o=r(6435),s=r(3759),u=r(2992);async function l(e,t){switch(await (0,s.A)(),e.method){case"GET":try{let{category:r,status:n,search:a}=e.query,i={};r&&"all"!==r&&(i.category=r),n&&(i.status=n),a&&(i.$or=[{title:{$regex:a,$options:"i"}},{description:{$regex:a,$options:"i"}},{organizer:{$regex:a,$options:"i"}}]);let o=new Date;await u.A.updateMany({date:{$lt:o},status:"upcoming"},{status:"completed"});let s=await u.A.find(i).sort({date:1}).limit(50);return t.status(200).json({success:!0,data:s})}catch(e){return console.error("Error fetching events:",e),t.status(500).json({success:!1,message:"Error fetching events",error:e.message})}case"POST":try{let{title:r,description:n,date:a,location:i,type:o,category:s,capacity:l,registrationLink:d,image:c,tags:p,organizer:g,userId:m}=e.body;if(!r||!n||!a||!d||!m||!g)return t.status(400).json({success:!1,message:"Missing required fields"});let f=new u.A({title:r,description:n,date:a,location:i||"TBA",type:o||"In-Person",category:s||"other",capacity:l||null,registrationLink:d,image:c||"",tags:p||[],organizer:g,userId:m,createdAt:"2025-04-28 19:22:32",status:new Date(a)>new Date?"upcoming":"completed"});return await f.save(),t.status(201).json({success:!0,data:f})}catch(e){return console.error("Error creating event:",e),t.status(500).json({success:!1,message:"Error creating event",error:e.message})}default:return t.setHeader("Allow",["GET","POST"]),t.status(405).end(`Method ${e.method} Not Allowed`)}}let d=(0,o.M)(n,"default"),c=(0,o.M)(n,"config"),p=new a.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/events",pathname:"/api/events",bundlePath:"",filename:""},userland:n})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=7139);module.exports=r})();