(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{345:(e,i,l)=>{"use strict";l.d(i,{A:()=>a});let a=(0,l(1713).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},2089:(e,i,l)=>{"use strict";l.d(i,{A:()=>a});let a=(0,l(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2169:(e,i,l)=>{"use strict";l.r(i),l.d(i,{default:()=>h});var a=l(7876),o=l(4232),r=l(2934),s=l(9099),t=l(7685),n=l(672),d=l(345),c=l(4564),p=l(5104),v=l(2089),u=l(7703),f=l.n(u);function h(){var e,i,l,u,h,x,_,m,g,j,b,k,N,y,P,C,L,A,B,w,E,D,S,F,M,O,T,z,I,G,H,R,V,U,X,q,J,K,Q,Y;let Z=(0,s.useRouter)(),{data:W,status:$,update:ee}=(0,r.useSession)({required:!0,onUnauthenticated(){Z.push("/auth/login")}}),[ei,el]=(0,o.useState)(null),[ea,eo]=(0,o.useState)(!0),[er,es]=(0,o.useState)(!1),[et,en]=(0,o.useState)(null),[ed,ec]=(0,o.useState)(!1),[ep,ev]=(0,o.useState)(!1),[eu,ef]=(0,o.useState)("all"),eh=["https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&backgroundColor=d1d4f9","https://api.dicebear.com/7.x/avataaars/svg?seed=Bailey&backgroundColor=c0aede","https://api.dicebear.com/7.x/bottts/svg?seed=Dusty&backgroundColor=ffdfbf","https://api.dicebear.com/7.x/bottts/svg?seed=Mittens&backgroundColor=ffd5dc","https://api.dicebear.com/7.x/bottts/svg?seed=Chester&backgroundColor=b6e3f4","https://api.dicebear.com/7.x/pixel-art/svg?seed=Milo&backgroundColor=b6e3f4","https://api.dicebear.com/7.x/pixel-art/svg?seed=Lucy&backgroundColor=d1d4f9","https://api.dicebear.com/7.x/pixel-art/svg?seed=Tiger&backgroundColor=c0aede","https://api.dicebear.com/7.x/lorelei/svg?seed=Sophie&backgroundColor=ffdfbf","https://api.dicebear.com/7.x/lorelei/svg?seed=Max&backgroundColor=ffd5dc","https://api.dicebear.com/7.x/lorelei/svg?seed=Luna&backgroundColor=b6e3f4","https://api.dicebear.com/7.x/micah/svg?seed=Oliver&backgroundColor=d1d4f9","https://api.dicebear.com/7.x/micah/svg?seed=Charlie&backgroundColor=c0aede","https://api.dicebear.com/7.x/micah/svg?seed=Ruby&backgroundColor=ffdfbf","https://api.dicebear.com/7.x/personas/svg?seed=Lily&backgroundColor=ffd5dc","https://api.dicebear.com/7.x/personas/svg?seed=Leo&backgroundColor=b6e3f4","https://api.dicebear.com/7.x/personas/svg?seed=Jasper&backgroundColor=d1d4f9"];(0,o.useEffect)(()=>{var e,i,l;(null==ei?void 0:null===(e=ei.profile)||void 0===e?void 0:e.avatar)!==(null==W?void 0:null===(i=W.user)||void 0===i?void 0:i.avatar)&&ee({...W,user:{...null==W?void 0:W.user,avatar:null==ei?void 0:null===(l=ei.profile)||void 0===l?void 0:l.avatar}})},[null==ei?void 0:null===(e=ei.profile)||void 0===e?void 0:e.avatar]),(0,o.useEffect)(()=>{"loading"!==$&&ex()},[W]);let ex=async()=>{try{eo(!0),en(null);let e=await fetch("/api/profile"),i=await e.json();if(!e.ok)throw Error(i.message||"Failed to fetch profile");el(i.user)}catch(e){console.error("Fetch profile error:",e),en(e.message),t.oR.error(e.message)}finally{eo(!1)}},e_=async()=>{try{es(!0);let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:ei})}),i=await e.json();if(!e.ok)throw Error(i.message||"Failed to update profile");el(i.user),ec(!1),t.oR.success("Profile updated successfully")}catch(e){console.error("Error updating profile:",e),t.oR.error(e.message)}finally{es(!1)}},em=async e=>{try{let i=t.oR.loading("Updating avatar..."),l=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:{...ei,profile:{...ei.profile,avatar:e}}})});if(!l.ok)throw Error("Failed to update avatar");let a=await l.json();el(a.user),await ee({...W,user:{...W.user,avatar:e}});let o=new Event("visibilitychange");document.dispatchEvent(o),ev(!1),t.oR.success("Avatar updated successfully",{id:i})}catch(e){console.error("Avatar update error:",e),t.oR.error("Failed to update avatar")}},eg=e=>{let i=[...ei.profile.experience];i.splice(e,1),el({...ei,profile:{...ei.profile,experience:i}})};return ea?(0,a.jsxs)("div",{className:f().loadingContainer,children:[(0,a.jsx)("div",{className:f().spinner}),(0,a.jsx)("p",{children:"Loading profile..."})]}):(0,a.jsxs)("div",{className:f().container,children:[(0,a.jsxs)("div",{className:f().header,children:[(0,a.jsxs)("div",{className:f().profileHeader,children:[(0,a.jsxs)("div",{className:f().avatar,children:[(null===(i=ei.profile)||void 0===i?void 0:i.avatar)?(0,a.jsx)("img",{src:ei.profile.avatar,alt:"".concat((null===(l=ei.profile)||void 0===l?void 0:l.firstName)||ei.username,"'s avatar")}):(0,a.jsx)("div",{className:f().avatarPlaceholder,children:((null===(h=ei.profile)||void 0===h?void 0:null===(u=h.firstName)||void 0===u?void 0:u[0])||ei.username[0]).toUpperCase()}),ed&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:f().changeAvatarButton,onClick:()=>ev(!0),children:"Change Avatar"}),ep&&(0,a.jsx)("div",{className:f().modalOverlay,children:(0,a.jsxs)("div",{className:f().avatarModal,children:[(0,a.jsxs)("div",{className:f().modalHeader,children:[(0,a.jsx)("h3",{className:f().modalTitle,children:"Choose an Avatar"}),(0,a.jsx)("button",{className:f().closeButton,onClick:()=>ev(!1),children:(0,a.jsx)(n.A,{size:20})})]}),(0,a.jsx)("div",{className:f().avatarCategories,children:[{id:"all",label:"All Styles"},{id:"human",label:"Human"},{id:"robots",label:"Robots"},{id:"pixel",label:"Pixel Art"},{id:"minimalist",label:"Minimalist"},{id:"abstract",label:"Abstract"},{id:"realistic",label:"Realistic"}].map(e=>(0,a.jsx)("button",{className:"".concat(f().categoryButton," ").concat(eu===e.id?f().active:""),onClick:()=>ef(e.id),children:e.label},e.id))}),(0,a.jsx)("div",{className:f().avatarGrid,children:(()=>{if("all"===eu)return eh;let e={human:["avataaars"],robots:["bottts"],pixel:["pixel-art"],minimalist:["lorelei"],abstract:["micah"],realistic:["personas"]};return eh.filter(i=>{var l;let a=null===(l=e[eu])||void 0===l?void 0:l[0];return a&&i.includes(a)})})().map((e,i)=>{var l;return(0,a.jsx)("div",{className:"".concat(f().avatarOption," ").concat((null===(l=ei.profile)||void 0===l?void 0:l.avatar)===e?f().selected:""),onClick:()=>em(e),children:(0,a.jsx)("img",{src:e,alt:"Avatar option ".concat(i+1),loading:"lazy"})},i)})})]})})]})]}),(0,a.jsxs)("div",{className:f().headerInfo,children:[(0,a.jsx)("h1",{children:(null===(x=ei.profile)||void 0===x?void 0:x.firstName)&&(null===(_=ei.profile)||void 0===_?void 0:_.lastName)?"".concat(ei.profile.firstName," ").concat(ei.profile.lastName):ei.username}),(0,a.jsx)("p",{className:f().role,children:ei.role}),ei.collegeId&&(0,a.jsx)("p",{className:f().college,children:ei.collegeId.name})]})]}),(0,a.jsx)("div",{className:f().actions,children:ed?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:f().saveButton,onClick:e_,disabled:er,children:[(0,a.jsx)(d.A,{size:20}),er?"Saving...":"Save Changes"]}),(0,a.jsxs)("button",{className:f().cancelButton,onClick:()=>ec(!1),disabled:er,children:[(0,a.jsx)(n.A,{size:20}),"Cancel"]})]}):(0,a.jsx)("button",{className:f().editButton,onClick:()=>ec(!0),children:"Edit Profile"})})]}),(0,a.jsxs)("div",{className:f().content,children:[(0,a.jsxs)("section",{className:f().section,children:[(0,a.jsx)("h2",{children:"Basic Information"}),(0,a.jsxs)("div",{className:f().fieldGrid,children:[(0,a.jsxs)("div",{className:f().field,children:[(0,a.jsx)("label",{children:"First Name"}),ed?(0,a.jsx)("input",{type:"text",value:(null===(m=ei.profile)||void 0===m?void 0:m.firstName)||"",onChange:e=>el({...ei,profile:{...ei.profile,firstName:e.target.value}})}):(0,a.jsx)("p",{children:(null===(g=ei.profile)||void 0===g?void 0:g.firstName)||"Not set"})]}),(0,a.jsxs)("div",{className:f().field,children:[(0,a.jsx)("label",{children:"Last Name"}),ed?(0,a.jsx)("input",{type:"text",value:(null===(j=ei.profile)||void 0===j?void 0:j.lastName)||"",onChange:e=>el({...ei,profile:{...ei.profile,lastName:e.target.value}})}):(0,a.jsx)("p",{children:(null===(b=ei.profile)||void 0===b?void 0:b.lastName)||"Not set"})]}),(0,a.jsxs)("div",{className:f().field,children:[(0,a.jsx)("label",{children:"Location"}),ed?(0,a.jsx)("input",{type:"text",value:(null===(k=ei.profile)||void 0===k?void 0:k.location)||"",onChange:e=>el({...ei,profile:{...ei.profile,location:e.target.value}})}):(0,a.jsx)("p",{children:(null===(N=ei.profile)||void 0===N?void 0:N.location)||"Not set"})]})]})]}),["student","alumni"].includes(ei.role)&&(0,a.jsxs)("section",{className:f().section,children:[(0,a.jsx)("h2",{children:"Education"}),(0,a.jsxs)("div",{className:f().fieldGrid,children:[(0,a.jsxs)("div",{className:f().field,children:[(0,a.jsx)("label",{children:"Degree"}),ed?(0,a.jsx)("input",{type:"text",value:(null===(P=ei.profile)||void 0===P?void 0:null===(y=P.college)||void 0===y?void 0:y.degree)||"",onChange:e=>el({...ei,profile:{...ei.profile,college:{...ei.profile.college,degree:e.target.value}}})}):(0,a.jsx)("p",{children:(null===(L=ei.profile)||void 0===L?void 0:null===(C=L.college)||void 0===C?void 0:C.degree)||"Not set"})]}),(0,a.jsxs)("div",{className:f().field,children:[(0,a.jsx)("label",{children:"Major"}),ed?(0,a.jsx)("input",{type:"text",value:(null===(B=ei.profile)||void 0===B?void 0:null===(A=B.college)||void 0===A?void 0:A.major)||"",onChange:e=>el({...ei,profile:{...ei.profile,college:{...ei.profile.college,major:e.target.value}}})}):(0,a.jsx)("p",{children:(null===(E=ei.profile)||void 0===E?void 0:null===(w=E.college)||void 0===w?void 0:w.major)||"Not set"})]}),(0,a.jsxs)("div",{className:f().field,children:[(0,a.jsx)("label",{children:"Graduation Year"}),ed?(0,a.jsx)("input",{type:"number",min:"2000",max:"2030",value:(null===(S=ei.profile)||void 0===S?void 0:null===(D=S.college)||void 0===D?void 0:D.graduationYear)||"",onChange:e=>el({...ei,profile:{...ei.profile,college:{...ei.profile.college,graduationYear:parseInt(e.target.value)}}})}):(0,a.jsx)("p",{children:(null===(M=ei.profile)||void 0===M?void 0:null===(F=M.college)||void 0===F?void 0:F.graduationYear)||"Not set"})]})]})]}),(0,a.jsxs)("section",{className:f().section,children:[(0,a.jsx)("h2",{children:"Bio"}),ed?(0,a.jsx)("textarea",{value:(null===(O=ei.profile)||void 0===O?void 0:O.bio)||"",onChange:e=>el({...ei,profile:{...ei.profile,bio:e.target.value}}),rows:4}):(0,a.jsx)("p",{className:f().bio,children:(null===(T=ei.profile)||void 0===T?void 0:T.bio)||"No bio added yet"})]}),(0,a.jsxs)("section",{className:f().section,children:[(0,a.jsx)("h2",{children:"Skills"}),ed?(0,a.jsx)("div",{className:f().skillsEdit,children:(0,a.jsx)("input",{type:"text",placeholder:"Add skills (comma-separated)",value:(null===(I=ei.profile)||void 0===I?void 0:null===(z=I.skills)||void 0===z?void 0:z.join(", "))||"",onChange:e=>el({...ei,profile:{...ei.profile,skills:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}})})}):(0,a.jsx)("div",{className:f().skills,children:null===(H=ei.profile)||void 0===H?void 0:null===(G=H.skills)||void 0===G?void 0:G.map((e,i)=>(0,a.jsx)("span",{className:f().skill,children:e},i))})]}),(0,a.jsxs)("section",{className:f().section,children:[(0,a.jsx)("h2",{children:"Social Links"}),(0,a.jsx)("div",{className:f().socialLinks,children:ed?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:f().socialField,children:[(0,a.jsx)("label",{children:"LinkedIn"}),(0,a.jsx)("input",{type:"url",value:(null===(V=ei.profile)||void 0===V?void 0:null===(R=V.socialLinks)||void 0===R?void 0:R.linkedin)||"",onChange:e=>{var i;return el({...ei,profile:{...ei.profile,socialLinks:{...null===(i=ei.profile)||void 0===i?void 0:i.socialLinks,linkedin:e.target.value}}})}})]}),(0,a.jsxs)("div",{className:f().socialField,children:[(0,a.jsx)("label",{children:"GitHub"}),(0,a.jsx)("input",{type:"url",value:(null===(X=ei.profile)||void 0===X?void 0:null===(U=X.socialLinks)||void 0===U?void 0:U.github)||"",onChange:e=>{var i;return el({...ei,profile:{...ei.profile,socialLinks:{...null===(i=ei.profile)||void 0===i?void 0:i.socialLinks,github:e.target.value}}})}})]}),(0,a.jsxs)("div",{className:f().socialField,children:[(0,a.jsx)("label",{children:"Portfolio"}),(0,a.jsx)("input",{type:"url",value:(null===(J=ei.profile)||void 0===J?void 0:null===(q=J.socialLinks)||void 0===q?void 0:q.portfolio)||"",onChange:e=>{var i;return el({...ei,profile:{...ei.profile,socialLinks:{...null===(i=ei.profile)||void 0===i?void 0:i.socialLinks,portfolio:e.target.value}}})}})]})]}):(0,a.jsx)("div",{className:f().socialLinksGrid,children:Object.entries((null===(K=ei.profile)||void 0===K?void 0:K.socialLinks)||{}).map(e=>{let[i,l]=e;return l&&(0,a.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:f().socialLink,children:[(0,a.jsx)(c.A,{size:16}),i]},i)})})})]}),"alumni"===ei.role&&(0,a.jsxs)("section",{className:f().section,children:[(0,a.jsx)("h2",{children:"Experience"}),ed&&(0,a.jsxs)("button",{className:f().addButton,onClick:()=>{ei.profile.experience||(ei.profile.experience=[]),el({...ei,profile:{...ei.profile,experience:[{title:"",company:"",startDate:"",endDate:"",description:"",current:!1},...ei.profile.experience]}})},children:[(0,a.jsx)(p.A,{size:20}),"Add Experience"]}),(0,a.jsx)("div",{className:f().experienceList,children:null===(Y=ei.profile)||void 0===Y?void 0:null===(Q=Y.experience)||void 0===Q?void 0:Q.map((e,i)=>{var l,o;return(0,a.jsx)("div",{className:f().experience,children:ed?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:f().experienceEdit,children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",value:e.title,onChange:l=>{let a=[...ei.profile.experience];a[i]={...e,title:l.target.value},el({...ei,profile:{...ei.profile,experience:a}})}}),(0,a.jsx)("input",{type:"text",placeholder:"Company",value:e.company,onChange:l=>{let a=[...ei.profile.experience];a[i]={...e,company:l.target.value},el({...ei,profile:{...ei.profile,experience:a}})}}),(0,a.jsxs)("div",{className:f().dateInputs,children:[(0,a.jsx)("input",{type:"date",value:(null===(l=e.startDate)||void 0===l?void 0:l.split("T")[0])||"",onChange:l=>{let a=[...ei.profile.experience];a[i]={...e,startDate:l.target.value},el({...ei,profile:{...ei.profile,experience:a}})}}),!e.current&&(0,a.jsx)("input",{type:"date",value:(null===(o=e.endDate)||void 0===o?void 0:o.split("T")[0])||"",onChange:l=>{let a=[...ei.profile.experience];a[i]={...e,endDate:l.target.value},el({...ei,profile:{...ei.profile,experience:a}})}})]}),(0,a.jsxs)("div",{className:f().currentPosition,children:[(0,a.jsx)("input",{type:"checkbox",checked:e.current,onChange:l=>{let a=[...ei.profile.experience];a[i]={...e,current:l.target.checked,endDate:l.target.checked?null:e.endDate},el({...ei,profile:{...ei.profile,experience:a}})}}),(0,a.jsx)("label",{children:"Current Position"})]}),(0,a.jsx)("textarea",{placeholder:"Description",value:e.description,onChange:l=>{let a=[...ei.profile.experience];a[i]={...e,description:l.target.value},el({...ei,profile:{...ei.profile,experience:a}})}}),(0,a.jsxs)("button",{className:f().removeButton,onClick:()=>eg(i),children:[(0,a.jsx)(v.A,{size:16}),"Remove"]})]})}):(0,a.jsxs)("div",{className:f().experienceView,children:[(0,a.jsx)("h3",{children:e.title}),(0,a.jsx)("h4",{children:e.company}),(0,a.jsxs)("p",{className:f().dates,children:[new Date(e.startDate).toLocaleDateString()," -",e.current?" Present":e.endDate?" ".concat(new Date(e.endDate).toLocaleDateString()):""]}),(0,a.jsx)("p",{className:f().description,children:e.description})]})},i)})})]})]})]})}},4564:(e,i,l)=>{"use strict";l.d(i,{A:()=>a});let a=(0,l(1713).A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},5104:(e,i,l)=>{"use strict";l.d(i,{A:()=>a});let a=(0,l(1713).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7703:e=>{e.exports={container:"Profile_container__sLcJd",header:"Profile_header__dPk19",profileHeader:"Profile_profileHeader__3j29L",avatar:"Profile_avatar__QY1U5",avatarPlaceholder:"Profile_avatarPlaceholder__K5V2F",headerInfo:"Profile_headerInfo__OGT9p",username:"Profile_username__hXuZV",role:"Profile_role__xCqHk",college:"Profile_college__HakUK",actions:"Profile_actions__hOCBJ",editButton:"Profile_editButton__d6zpM",saveButton:"Profile_saveButton___s5IK",cancelButton:"Profile_cancelButton__LkvSC",addButton:"Profile_addButton__dZq6u",section:"Profile_section__OXw_d",fieldGrid:"Profile_fieldGrid__i2khk",field:"Profile_field__VkhzQ",bio:"Profile_bio__XhAQX",skills:"Profile_skills__67hMB",skill:"Profile_skill__hCFDq",socialLinks:"Profile_socialLinks__d1pL6",socialField:"Profile_socialField___7dOe",socialLinksGrid:"Profile_socialLinksGrid__Kd7ys",socialLink:"Profile_socialLink__p_izl",experienceList:"Profile_experienceList__1jSiA",experience:"Profile_experience__V7TQ6",experienceEdit:"Profile_experienceEdit__uy2Uu",dateInputs:"Profile_dateInputs__75c21",currentPosition:"Profile_currentPosition__FiaxE",removeButton:"Profile_removeButton__dIt8g",experienceView:"Profile_experienceView__wanii",dates:"Profile_dates__yUecF",description:"Profile_description__fz5tX",loadingContainer:"Profile_loadingContainer__RttjZ",spinner:"Profile_spinner__zaDez",spin:"Profile_spin__fK_ll",avatarUpload:"Profile_avatarUpload__lOgeP",avatarInput:"Profile_avatarInput__Qq64r",avatarLabel:"Profile_avatarLabel__oGmPh",modalOverlay:"Profile_modalOverlay__Kba0T",avatarModal:"Profile_avatarModal__DwKJ6",modalHeader:"Profile_modalHeader__ASXTu",closeButton:"Profile_closeButton__QFzoj",avatarGrid:"Profile_avatarGrid__fqSbm",avatarOption:"Profile_avatarOption__EX0t4",selected:"Profile_selected__JDvvw",changeAvatarButton:"Profile_changeAvatarButton__6z6gO",avatarCategories:"Profile_avatarCategories__rxPSu",categoryButton:"Profile_categoryButton__bDZJE",active:"Profile_active__NLVi_",modalTitle:"Profile_modalTitle__usp5H"}},9099:(e,i,l)=>{e.exports=l(8253)},9238:(e,i,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/profile",function(){return l(2169)}])}},e=>{var i=i=>e(e.s=i);e.O(0,[636,593,792],()=>i(9238)),_N_E=e.O()}]);