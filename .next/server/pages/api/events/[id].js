"use strict";(()=>{var e={};e.id=326,e.ids=[326],e.modules={2992:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(6037),s=n.n(r);let a=new(s()).Schema({title:{type:String,required:[!0,"Please provide an event title"],trim:!0},description:{type:String,required:[!0,"Please provide an event description"],trim:!0},date:{type:Date,required:[!0,"Please provide an event date"]},location:{type:String,default:"TBA"},type:{type:String,enum:["In-Person","Virtual","Hybrid"],default:"In-Person"},category:{type:String,enum:["tech","cultural","academic","sports","workshop","other"],default:"other"},capacity:{type:Number,default:null},registrationLink:{type:String,required:[!0,"Please provide a registration link"],trim:!0},image:{type:String,default:""},tags:[{type:String,trim:!0}],organizer:{type:String,required:[!0,"Please provide an organizer name"],trim:!0},userId:{type:String,required:[!0,"Please provide a user ID"]},createdAt:{type:Date,default:Date.now},status:{type:String,enum:["upcoming","ongoing","completed","cancelled"],default:"upcoming"},attendees:{type:Number,default:0}});a.index({date:1,category:1,status:1});let i=s().models.Event||s().model("Event",a)},3480:(e,t,n)=>{e.exports=n(5600)},3759:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(6037),s=n.n(r);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable in .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){return i.conn||(i.promise||(i.promise=s().connect(a).then(e=>e)),i.conn=await i.promise),i.conn}},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6037:e=>{e.exports=require("mongoose")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},7730:(e,t,n)=>{n.r(t),n.d(t,{config:()=>l,default:()=>c,routeModule:()=>p});var r={};n.r(r),n.d(r,{default:()=>d});var s=n(3480),a=n(8667),i=n(6435),o=n(3759),u=n(2992);async function d(e,t){await (0,o.A)();let{id:n}=e.query;switch(e.method){case"GET":try{let e=await u.A.findById(n);if(!e)return t.status(404).json({success:!1,message:"Event not found"});return t.status(200).json({success:!0,data:e})}catch(e){return t.status(500).json({success:!1,message:"Error fetching event",error:e.message})}case"PUT":try{let{userId:r}=e.body,s=await u.A.findById(n);if(!s)return t.status(404).json({success:!1,message:"Event not found"});if(s.userId!==r)return t.status(403).json({success:!1,message:"Not authorized to update this event"});let a=await u.A.findByIdAndUpdate(n,{...e.body,updatedAt:"2025-04-28 19:22:32"},{new:!0,runValidators:!0});return t.status(200).json({success:!0,data:a})}catch(e){return t.status(500).json({success:!1,message:"Error updating event",error:e.message})}case"DELETE":try{let{userId:r}=e.body,s=await u.A.findById(n);if(!s)return t.status(404).json({success:!1,message:"Event not found"});if(s.userId!==r)return t.status(403).json({success:!1,message:"Not authorized to delete this event"});return await u.A.findByIdAndDelete(n),t.status(200).json({success:!0,message:"Event deleted successfully"})}catch(e){return t.status(500).json({success:!1,message:"Error deleting event",error:e.message})}default:return t.setHeader("Allow",["GET","PUT","DELETE"]),t.status(405).end(`Method ${e.method} Not Allowed`)}}let c=(0,i.M)(r,"default"),l=(0,i.M)(r,"config"),p=new s.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/events/[id]",pathname:"/api/events/[id]",bundlePath:"",filename:""},userland:r})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=7730);module.exports=n})();