(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{89:(n,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/donationportal",function(){return a(5144)}])},710:(n,t,a)=>{"use strict";a.d(t,{A:()=>e});let e=(0,a(1713).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4622:(n,t,a)=>{"use strict";a.d(t,{A:()=>e});let e=(0,a(1713).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5144:(n,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var e=a(7876),o=a(4232),i=a(1040),s=a(7685),r=a(4e3),l=a(7959),d=a(2671),c=a(9116),u=a(4622),m=a(760),_=a(710),h=a(9496),p=a.n(h);let x=n=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(n),D=n=>new Date(n).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),N=n=>{let{size:t="default"}=n;return(0,e.jsx)("div",{className:p().loadingSpinner,children:(0,e.jsx)(l.A,{size:"small"===t?16:24,className:p().spinnerIcon})})};function j(){let n=(0,r.useRouter)(),[t,a]=(0,o.useState)([]),[l,h]=(0,o.useState)({totalAmount:0,totalDonors:0,monthlyDonors:0}),[j,y]=(0,o.useState)({name:"",amount:"",recurring:!1,userId:"sr4jan",createdAt:"2025-04-27 22:11:03"}),[g,b]=(0,o.useState)(!0),[v,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{k();let n=setInterval(k,3e4);return()=>clearInterval(n)},[]);let k=async()=>{try{let n=await i.A.get("/api/donation");n.data.success&&(a(n.data.donations),h(n.data.stats||{totalAmount:n.data.donations.reduce((n,t)=>n+(t.amount||0),0),totalDonors:n.data.donations.length,monthlyDonors:n.data.donations.filter(n=>n.recurring).length}))}catch(n){console.error("Error fetching donations:",n),s.oR.error("Failed to load recent donations")}finally{b(!1)}},A=()=>{if(!j.name.trim())return s.oR.error("Please enter your name"),!1;let n=Number(j.amount);return!n||n<100?(s.oR.error("Minimum donation amount is ₹100"),!1):!(n>1e5)||(s.oR.error("Maximum donation amount is ₹100,000"),!1)},M=async t=>{if(t.preventDefault(),A()){f(!0);try{(await i.A.post("/api/donation",{name:j.name.trim(),amount:parseInt(j.amount,10),recurring:!!j.recurring,userId:"sr4jan",createdAt:"2025-04-27 22:11:03"})).data.success&&(s.oR.success("Thank you for your donation!"),y({name:"",amount:"",recurring:!1,userId:"sr4jan",createdAt:"2025-04-27 22:11:03"}),await k(),n.push("/donationportal/thankyou"))}catch(n){console.error("Donation error:",n),s.oR.error("Failed to process donation")}finally{f(!1)}}};return g?(0,e.jsx)("div",{className:p().loadingContainer,children:(0,e.jsx)(N,{})}):(0,e.jsxs)("div",{className:p().container,children:[(0,e.jsx)(s.l$,{}),(0,e.jsxs)("header",{className:p().header,children:[(0,e.jsx)("h1",{className:p().title,children:"Support Our Community"}),(0,e.jsx)("p",{className:p().subtitle,children:"Your contribution helps us create better opportunities for students and strengthen our alumni network."}),(0,e.jsxs)("div",{className:p().statsBar,children:[(0,e.jsxs)("div",{className:p().statItem,children:[(0,e.jsx)("div",{className:p().statValue,children:x(l.totalAmount)}),(0,e.jsx)("div",{className:p().statLabel,children:"Total Donations"})]}),(0,e.jsxs)("div",{className:p().statItem,children:[(0,e.jsx)("div",{className:p().statValue,children:l.totalDonors}),(0,e.jsx)("div",{className:p().statLabel,children:"Supporters"})]}),(0,e.jsxs)("div",{className:p().statItem,children:[(0,e.jsx)("div",{className:p().statValue,children:l.monthlyDonors}),(0,e.jsx)("div",{className:p().statLabel,children:"Monthly Donors"})]})]})]}),(0,e.jsxs)("div",{className:p().grid,children:[(0,e.jsxs)("div",{className:p().donationForm,children:[(0,e.jsx)("h2",{className:p().formTitle,children:"Make a Donation"}),(0,e.jsxs)("form",{onSubmit:M,children:[(0,e.jsxs)("div",{className:p().inputGroup,children:[(0,e.jsx)("label",{className:p().label,children:"Your Name"}),(0,e.jsxs)("div",{className:p().inputWrapper,children:[(0,e.jsx)(d.A,{size:18,className:p().inputIcon}),(0,e.jsx)("input",{type:"text",placeholder:"John Doe",value:j.name,onChange:n=>y({...j,name:n.target.value.slice(0,50)}),className:p().input,disabled:v,required:!0})]})]}),(0,e.jsxs)("div",{className:p().inputGroup,children:[(0,e.jsx)("label",{className:p().label,children:"Donation Amount (₹)"}),(0,e.jsxs)("div",{className:p().inputWrapper,children:[(0,e.jsx)(c.A,{size:18,className:p().inputIcon}),(0,e.jsx)("input",{type:"number",placeholder:"1000",value:j.amount,onChange:n=>y({...j,amount:Math.min(1e5,Math.max(0,Number(n.target.value)))}),className:p().input,min:"100",max:"100000",disabled:v,required:!0})]}),(0,e.jsx)("small",{className:p().helperText,children:"Minimum: ₹100 • Maximum: ₹100,000"})]}),(0,e.jsxs)("label",{className:p().checkbox,children:[(0,e.jsx)("input",{type:"checkbox",checked:j.recurring,onChange:n=>y({...j,recurring:n.target.checked}),disabled:v}),"Make this a monthly donation"]}),(0,e.jsx)("button",{type:"submit",disabled:v,className:p().button,children:v?(0,e.jsx)(N,{size:"small"}):(0,e.jsxs)(e.Fragment,{children:["Donate Now",(0,e.jsx)(u.A,{size:18})]})})]})]}),(0,e.jsx)("div",{className:p().donationsList,children:0===t.length?(0,e.jsxs)("div",{className:p().emptyState,children:[(0,e.jsx)(m.A,{size:48}),(0,e.jsx)("p",{children:"Be the first to contribute!"})]}):t.map(n=>(0,e.jsxs)("div",{className:p().donationCard,children:[(0,e.jsx)("h3",{className:p().donorName,children:n.name}),(0,e.jsxs)("div",{className:p().donationDetails,children:[(0,e.jsx)("span",{className:p().donationAmount,children:x(n.amount)}),n.recurring&&(0,e.jsxs)("span",{className:p().donationBadge,children:[(0,e.jsx)(_.A,{size:12}),"Monthly Donor"]})]}),(0,e.jsx)("p",{className:p().donationTime,children:D(n.createdAt)})]},n._id))})]})]})}},7959:(n,t,a)=>{"use strict";a.d(t,{A:()=>e});let e=(0,a(1713).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},9116:(n,t,a)=>{"use strict";a.d(t,{A:()=>e});let e=(0,a(1713).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9496:n=>{n.exports={container:"Donation_container__psaTR",header:"Donation_header__8hqwc",title:"Donation_title__0Rgo8",subtitle:"Donation_subtitle__e20Kl",statsBar:"Donation_statsBar__1mTUU",statItem:"Donation_statItem__fOa_D",statValue:"Donation_statValue__vvGW2",statLabel:"Donation_statLabel__LYQXM",grid:"Donation_grid__hS2Hc",donationForm:"Donation_donationForm__c_0z3",formTitle:"Donation_formTitle__NfzYF",inputGroup:"Donation_inputGroup__r5QYV",label:"Donation_label__5Fh4u",inputWrapper:"Donation_inputWrapper___i5MO",inputIcon:"Donation_inputIcon__kLKxP",input:"Donation_input__8dpU_",fundingOptions:"Donation_fundingOptions__dbfeN",fundingOption:"Donation_fundingOption__SlEH8",selected:"Donation_selected___6olP",fundingOptionTitle:"Donation_fundingOptionTitle___VUBY",fundingOptionDesc:"Donation_fundingOptionDesc__5JJLY",paymentMethods:"Donation_paymentMethods__lFvcf",paymentMethod:"Donation_paymentMethod__d__2k",button:"Donation_button__RpwuL",donationsList:"Donation_donationsList__CbEtF",donationCard:"Donation_donationCard__x4gHJ",donorName:"Donation_donorName__KX_fz",donationDetails:"Donation_donationDetails__tPyJl",donationAmount:"Donation_donationAmount___FeK_",donationBadge:"Donation_donationBadge__BpY_4",donationTime:"Donation_donationTime__CQ9HD",content:"Donation_content__elgPi",loadingContainer:"Donation_loadingContainer__iet0u",spinner:"Donation_spinner__8XDiE",spinAnimation:"Donation_spinAnimation__5NXsT",spin:"Donation_spin__ypMmU",buttonSpinner:"Donation_buttonSpinner__RHCQL"}}},n=>{var t=t=>n(n.s=t);n.O(0,[290,0,40,636,593,792],()=>t(89)),_N_E=n.O()}]);