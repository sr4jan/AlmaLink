(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{546:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},581:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var r=t(7876),s=t(4232),n=t(7328),d=t.n(n),l=t(2934),i=t(9099),o=t(7276),c=t.n(o);function u(){let{data:e,status:a}=(0,l.useSession)(),t=(0,i.useRouter)(),[n,o]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)([]),[_,f]=(0,s.useState)({totalColleges:0,activeColleges:0,totalUsers:0,pendingApprovals:0}),[x,v]=(0,s.useState)(!0),[b,j]=(0,s.useState)(""),[y,g]=(0,s.useState)({username:"",email:"",password:"",firstName:"",lastName:""});(0,s.useEffect)(()=>{"unauthenticated"===a&&t.push("/auth/login")},[a,t]),(0,s.useEffect)(()=>{var a;(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.role)!=="superadmin"&&t.push("/dashboard/superadmin")},[e,t]),(0,s.useEffect)(()=>{var a;(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.role)==="superadmin"&&N()},[e]);let N=async()=>{try{v(!0);let e=await fetch("/api/dashboard/superadmin/stats");if(!e.ok)throw Error("Failed to fetch stats");let a=await e.json();f(a);let t=await fetch("/api/dashboard/superadmin/colleges");if(!t.ok)throw Error("Failed to fetch colleges");let r=await t.json();p(r)}catch(e){console.error("Error fetching dashboard data:",e),j(e.message)}finally{v(!1)}};if("loading"===a||x)return(0,r.jsx)("div",{className:c().loadingContainer,children:(0,r.jsx)("div",{className:c().loadingSpinner,children:"Loading..."})});if(b)return(0,r.jsx)("div",{className:c().errorContainer,children:(0,r.jsxs)("div",{className:c().error,children:["Error: ",b,(0,r.jsx)("button",{className:"".concat(c().button," ").concat(c().primaryButton),onClick:N,children:"Retry"})]})});if(!e||"superadmin"!==e.user.role)return null;let A=e=>{m(h.find(a=>a._id===e)),o(!0)},S=async e=>{if(window.confirm("Are you sure you want to delete this college?"))try{if(!(await fetch("/api/dashboard/superadmin/colleges/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete college");N()}catch(e){console.error("Error deleting college:",e),j(e.message)}},w=async e=>{e.preventDefault(),v(!0),j("");try{let e=await fetch("/api/admin/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,collegeId:u._id,role:"admin"})}),a=await e.json();if(!e.ok)throw Error(a.message||"Error creating admin");g({username:"",email:"",password:"",firstName:"",lastName:""}),o(!1),N()}catch(e){j(e.message)}finally{v(!1)}},C=async(e,a)=>{if(window.confirm("Are you sure you want to remove the admin from ".concat(a,"?")))try{if(!(await fetch("/api/admin/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete admin");N()}catch(e){console.error("Error deleting admin:",e),j(e.message)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"SuperAdmin Dashboard - AlmaLink"})}),(0,r.jsxs)("div",{className:c().container,children:[(0,r.jsxs)("div",{className:c().header,children:[(0,r.jsx)("h1",{className:c().title,children:"SuperAdmin Dashboard"}),(0,r.jsx)("button",{className:"".concat(c().button," ").concat(c().primaryButton),onClick:()=>t.push("/dashboard/superadmin/colleges/new"),children:"Add New College"})]}),(0,r.jsxs)("div",{className:c().statsGrid,children:[(0,r.jsxs)("div",{className:c().statsCard,children:[(0,r.jsx)("div",{className:c().statsLabel,children:"Total Colleges"}),(0,r.jsx)("div",{className:c().statsValue,children:_.totalColleges})]}),(0,r.jsxs)("div",{className:c().statsCard,children:[(0,r.jsx)("div",{className:c().statsLabel,children:"Active Colleges"}),(0,r.jsx)("div",{className:c().statsValue,children:_.activeColleges})]}),(0,r.jsxs)("div",{className:c().statsCard,children:[(0,r.jsx)("div",{className:c().statsLabel,children:"Total Users"}),(0,r.jsx)("div",{className:c().statsValue,children:_.totalUsers})]}),(0,r.jsxs)("div",{className:c().statsCard,children:[(0,r.jsx)("div",{className:c().statsLabel,children:"Pending Approvals"}),(0,r.jsx)("div",{className:c().statsValue,children:_.pendingApprovals})]})]}),(0,r.jsx)("div",{className:c().mainGrid,children:(0,r.jsxs)("div",{className:c().card,children:[(0,r.jsxs)("div",{className:c().cardHeader,children:[(0,r.jsx)("h2",{className:c().cardTitle,children:"Colleges and Admins"}),(0,r.jsxs)("div",{className:c().searchBar,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search colleges...",className:c().searchInput}),(0,r.jsxs)("select",{className:c().filterSelect,children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,r.jsxs)("table",{className:c().table,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"College Name"}),(0,r.jsx)("th",{children:"Code"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Admin"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:h.length>0?h.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.code}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"".concat(c().status," ").concat("active"===e.status?c().statusActive:c().statusInactive),children:e.status})}),(0,r.jsx)("td",{children:e.admin?(0,r.jsxs)("div",{className:c().adminInfo,children:[(0,r.jsx)("span",{children:e.admin.email}),(0,r.jsx)("button",{className:"".concat(c().actionButton," ").concat(c().deleteButton),onClick:()=>C(e.admin.id,e.name),children:"Remove Admin"})]}):(0,r.jsx)("button",{className:"".concat(c().button," ").concat(c().primaryButton),onClick:()=>A(e._id),children:"Add Admin"})}),(0,r.jsxs)("td",{className:c().actionButtons,children:[(0,r.jsx)("button",{className:"".concat(c().actionButton," ").concat(c().editButton),onClick:()=>t.push("/dashboard/superadmin/colleges/".concat(e._id,"/edit")),children:"Edit"}),(0,r.jsx)("button",{className:"".concat(c().actionButton," ").concat(c().deleteButton),onClick:()=>S(e._id),children:"Delete"})]})]},e._id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:c().noData,children:"No colleges found"})})})]})]})})]}),n&&(0,r.jsx)("div",{className:c().modalOverlay,children:(0,r.jsxs)("div",{className:c().modal,children:[(0,r.jsxs)("div",{className:c().modalHeader,children:[(0,r.jsxs)("h3",{children:["Create Admin for ",null==u?void 0:u.name]}),(0,r.jsx)("button",{className:c().closeButton,onClick:()=>o(!1),"aria-label":"Close modal",children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:w,className:c().form,children:[b&&(0,r.jsxs)("div",{className:c().error,children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),b]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"username",children:"Username"}),(0,r.jsx)("input",{id:"username",type:"text",value:y.username,onChange:e=>g({...y,username:e.target.value}),required:!0,placeholder:"Enter username"})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",value:y.email,onChange:e=>g({...y,email:e.target.value}),required:!0,placeholder:"Enter email address"})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:y.password,onChange:e=>g({...y,password:e.target.value}),required:!0,placeholder:"Enter password"})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"firstName",children:"First Name"}),(0,r.jsx)("input",{id:"firstName",type:"text",value:y.firstName,onChange:e=>g({...y,firstName:e.target.value}),required:!0,placeholder:"Enter first name"})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),(0,r.jsx)("input",{id:"lastName",type:"text",value:y.lastName,onChange:e=>g({...y,lastName:e.target.value}),required:!0,placeholder:"Enter last name"})]}),(0,r.jsxs)("div",{className:c().modalFooter,children:[(0,r.jsx)("button",{type:"button",className:"".concat(c().button," ").concat(c().secondaryButton),onClick:()=>o(!1),disabled:x,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"".concat(c().button," ").concat(c().primaryButton),disabled:x,children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:c().spinner,width:"16",height:"16",viewBox:"0 0 24 24",children:(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",fill:"none",strokeWidth:"4"})}),"Creating..."]}):"Create Admin"})]})]})]})})]})}},1393:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return d}});let r=t(4232),s=r.useLayoutEffect,n=r.useEffect;function d(e){let{headManager:a,reduceComponentsToState:t}=e;function d(){if(a&&a.mountedInstances){let s=r.Children.toArray(Array.from(a.mountedInstances).filter(Boolean));a.updateHead(t(s,e))}}return s(()=>{var t;return null==a||null==(t=a.mountedInstances)||t.add(e.children),()=>{var t;null==a||null==(t=a.mountedInstances)||t.delete(e.children)}}),s(()=>(a&&(a._pendingUpdate=d),()=>{a&&(a._pendingUpdate=d)})),n(()=>(a&&a._pendingUpdate&&(a._pendingUpdate(),a._pendingUpdate=null),()=>{a&&a._pendingUpdate&&(a._pendingUpdate(),a._pendingUpdate=null)})),null}},5648:(e,a)=>{"use strict";function t(e){let{ampFirst:a=!1,hybrid:t=!1,hasQuery:r=!1}=void 0===e?{}:e;return a||t&&r}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"isInAmpMode",{enumerable:!0,get:function(){return t}})},7276:e=>{e.exports={container:"SuperAdminDashboard_container__qrL_5",header:"SuperAdminDashboard_header__2dBBE",title:"SuperAdminDashboard_title__SUQrA",statsGrid:"SuperAdminDashboard_statsGrid__oiQA2",statsCard:"SuperAdminDashboard_statsCard__JmEZW",statsLabel:"SuperAdminDashboard_statsLabel__WpG68",statsValue:"SuperAdminDashboard_statsValue__w0Q8B",mainGrid:"SuperAdminDashboard_mainGrid__Jov75",card:"SuperAdminDashboard_card__bPolm",cardHeader:"SuperAdminDashboard_cardHeader__0OAWy",cardTitle:"SuperAdminDashboard_cardTitle__gilNt",button:"SuperAdminDashboard_button__COJAX",primaryButton:"SuperAdminDashboard_primaryButton___67CP",secondaryButton:"SuperAdminDashboard_secondaryButton__79eLN",table:"SuperAdminDashboard_table__U0Dwn",actionButton:"SuperAdminDashboard_actionButton__hzecB",editButton:"SuperAdminDashboard_editButton__e_DAo",deleteButton:"SuperAdminDashboard_deleteButton__X8R9z",avatar:"SuperAdminDashboard_avatar__aps2b",status:"SuperAdminDashboard_status__PPNSD",statusActive:"SuperAdminDashboard_statusActive__U0R7K",statusInactive:"SuperAdminDashboard_statusInactive__haTzZ",searchBar:"SuperAdminDashboard_searchBar__a5nYi",searchInput:"SuperAdminDashboard_searchInput__cvD61",filterSelect:"SuperAdminDashboard_filterSelect__yntwC",modalOverlay:"SuperAdminDashboard_modalOverlay__2K5ee",modal:"SuperAdminDashboard_modal__MIWYw",modalHeader:"SuperAdminDashboard_modalHeader__iW_0z",closeButton:"SuperAdminDashboard_closeButton__dWxFT",actionButtons:"SuperAdminDashboard_actionButtons__DouJW",addButton:"SuperAdminDashboard_addButton__Ow1Yk",form:"SuperAdminDashboard_form__lOSzI",formGroup:"SuperAdminDashboard_formGroup__vvUGQ",modalFooter:"SuperAdminDashboard_modalFooter__LpYRT",error:"SuperAdminDashboard_error__FaKXv",modalFadeIn:"SuperAdminDashboard_modalFadeIn__jD4mM"}},7328:(e,a,t)=>{e.exports=t(9836)},7515:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"AmpStateContext",{enumerable:!0,get:function(){return r}});let r=t(4252)._(t(4232)).default.createContext({})},7687:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/superadmin",function(){return t(581)}])},9099:(e,a,t)=>{e.exports=t(8253)},9836:(e,a,t)=>{"use strict";var r=t(5364);Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return f},defaultHead:function(){return m}});let s=t(4252),n=t(8365),d=t(7876),l=n._(t(4232)),i=s._(t(1393)),o=t(7515),c=t(6834),u=t(5648);function m(e){void 0===e&&(e=!1);let a=[(0,d.jsx)("meta",{charSet:"utf-8"},"charset")];return e||a.push((0,d.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),a}function h(e,a){return"string"==typeof a||"number"==typeof a?e:a.type===l.default.Fragment?e.concat(l.default.Children.toArray(a.props.children).reduce((e,a)=>"string"==typeof a||"number"==typeof a?e:e.concat(a),[])):e.concat(a)}t(546);let p=["name","httpEquiv","charSet","itemProp"];function _(e,a){let{inAmpMode:t}=a;return e.reduce(h,[]).reverse().concat(m(t).reverse()).filter(function(){let e=new Set,a=new Set,t=new Set,r={};return s=>{let n=!0,d=!1;if(s.key&&"number"!=typeof s.key&&s.key.indexOf("$")>0){d=!0;let a=s.key.slice(s.key.indexOf("$")+1);e.has(a)?n=!1:e.add(a)}switch(s.type){case"title":case"base":a.has(s.type)?n=!1:a.add(s.type);break;case"meta":for(let e=0,a=p.length;e<a;e++){let a=p[e];if(s.props.hasOwnProperty(a)){if("charSet"===a)t.has(a)?n=!1:t.add(a);else{let e=s.props[a],t=r[a]||new Set;("name"!==a||!d)&&t.has(e)?n=!1:(t.add(e),r[a]=t)}}}}return n}}()).reverse().map((e,a)=>{let s=e.key||a;if(r.env.__NEXT_OPTIMIZE_FONTS&&!t&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(a=>e.props.href.startsWith(a))){let a={...e.props||{}};return a["data-href"]=a.href,a.href=void 0,a["data-optimized-fonts"]=!0,l.default.cloneElement(e,a)}return l.default.cloneElement(e,{key:s})})}let f=function(e){let{children:a}=e,t=(0,l.useContext)(o.AmpStateContext),r=(0,l.useContext)(c.HeadManagerContext);return(0,d.jsx)(i.default,{reduceComponentsToState:_,headManager:r,inAmpMode:(0,u.isInAmpMode)(t),children:a})};("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(7687)),_N_E=e.O()}]);