(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{26:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},345:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},710:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1111:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},2089:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2731:(e,t,s)=>{"use strict";s.r(t),s.d(t,{__N_SSP:()=>C,default:()=>Q});var a=s(7876),i=s(4232),n=s(2934),o=s(8230),l=s.n(o),r=s(1040),d=s(7496),u=s.n(d),c=s(1713);let p=(0,c.A)("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var _=s(26);let h=(0,c.A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),m=(0,c.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var v=s(345),g=s(672),y=s(2671),x=s(710),j=s(5037),f=s(7959),N=s(2972),P=s(1111),k=s(2089),A=s(7685);let q=e=>{let t={Pending:"#6c757d",General:"#0d6efd",Programming:"#198754","Web Development":"#dc3545","Mobile Development":"#fd7e14",Database:"#6610f2","Cloud Computing":"#0dcaf0",DevOps:"#d63384",Security:"#dc3545","Machine Learning":"#198754",Networking:"#6f42c1",Other:"#6c757d"};return t[e]||t.Other};var C=!0;function Q(){var e;let{data:t,status:s}=(0,n.useSession)(),[o,d]=(0,i.useState)([]),[c,C]=(0,i.useState)({title:"",description:""}),[Q,w]=(0,i.useState)({}),[b,M]=(0,i.useState)(0),[z,B]=(0,i.useState)(null),[R,I]=(0,i.useState)({title:"",description:""}),[S,E]=(0,i.useState)({post:!1,replies:{},votes:{},delete:{}}),[F,H]=(0,i.useState)({}),T=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});(0,i.useEffect)(()=>{(async()=>{try{let e=await r.A.get("/api/questions");d(e.data),M(e.data.length)}catch(e){console.error("Error fetching questions:",e),A.oR.error("Failed to fetch questions")}})()},[]);let V=async()=>{if(!t){A.oR.error("Please login to post a question");return}if(!c.title.trim()){A.oR.error("Please provide a question title");return}try{E(e=>({...e,post:!0}));let e=await r.A.post("/api/questions",{title:c.title.trim(),description:c.description.trim()});"Pending"===e.data.category?(A.oR.loading("Classifying your question...",{duration:3e3}),setTimeout(fetchQuestions,3e3)):(d(t=>[e.data,...t]),A.oR.success("Question posted in ".concat(e.data.category," category!"))),C({title:"",description:""})}catch(t){var e,s;console.error("Error posting question:",t),A.oR.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to post question")}finally{E(e=>({...e,post:!1}))}},D=async e=>{var s;if(!t){A.oR.error("Please login to reply");return}if(!(null===(s=Q[e])||void 0===s?void 0:s.trim())){A.oR.error("Please enter a reply");return}try{E(t=>({...t,replies:{...t.replies,[e]:!0}})),await r.A.patch("/api/questions/reply",{questionId:e,text:Q[e]}),w(t=>({...t,[e]:""})),await fetchQuestions(),A.oR.success("Reply posted successfully!")}catch(e){console.error("Error posting reply:",e),A.oR.error("Failed to post reply")}finally{E(t=>({...t,replies:{...t.replies,[e]:!1}}))}},O=async(e,s)=>{if(!t){A.oR.error("Please login to vote");return}try{E(t=>({...t,votes:{...t.votes,[e]:!0}}));let t=await r.A.patch("/api/questions/".concat(e,"/vote"),{direction:s});t.data&&d(s=>s.map(s=>s._id===e?{...s,...t.data}:s))}catch(e){var a,i;console.error("Error voting:",e),A.oR.error((null===(i=e.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.message)||"Failed to register vote")}finally{E(t=>({...t,votes:{...t.votes,[e]:!1}}))}},U=async e=>{if(!t){A.oR.error("Please login to delete questions");return}if(window.confirm("Are you sure you want to delete this question?"))try{E(t=>({...t,delete:{...t.delete,[e]:!0}})),await r.A.delete("/api/questions/".concat(e)),await fetchQuestions(),A.oR.success("Question deleted successfully!")}catch(e){var s,a;console.error("Error deleting question:",e),A.oR.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to delete question")}finally{E(t=>({...t,delete:{...t.delete,[e]:!1}}))}},W=e=>{var t,s,a;return e&&(e.username||e.name||"".concat((null===(t=e.profile)||void 0===t?void 0:t.firstName)||""," ").concat((null===(s=e.profile)||void 0===s?void 0:s.lastName)||"").trim()||(null===(a=e.email)||void 0===a?void 0:a.split("@")[0]))||"Anonymous"},L=e=>{var t;return e?(null===(t=e.profile)||void 0===t?void 0:t.avatar)||e.avatar||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(W(e)),"&background=random"):null},G=(e,s)=>{var a;return null!=t&&null!==(a=t.user)&&void 0!==a&&!!a.id&&!!e.votes&&e.votes.some(e=>e.userId===t.user.id&&e.direction===s)},X=e=>{let t=o.find(t=>t._id===e);I({title:t.title,description:t.description}),B(e)},Y=e=>{var s;if(!t||!e)return!1;if("superadmin"===t.user.role||"admin"===t.user.role&&e.collegeId===t.user.collegeId)return!0;let a=(null===(s=e.postedBy)||void 0===s?void 0:s._id)||e.postedBy;return a&&a.toString()===t.user.id};return(0,a.jsxs)("div",{className:u().pageContainer,children:[(0,a.jsxs)("div",{className:u().leftColumn,children:[(0,a.jsx)("h1",{className:u().leftColumnHeading,children:"Post a Question"}),t?(0,a.jsxs)("div",{className:u().newQuestionCard,children:[(0,a.jsx)("h2",{className:u().subHeading,children:"Ask a Question"}),(0,a.jsx)("input",{type:"text",placeholder:"What's your question? *",value:c.title,onChange:e=>C(t=>({...t,title:e.target.value})),className:u().input,required:!0}),(0,a.jsx)("textarea",{placeholder:"Add more details about your question... (optional)",rows:8,value:c.description,onChange:e=>C(t=>({...t,description:e.target.value})),className:u().textarea}),(0,a.jsxs)("button",{onClick:V,className:u().postButton,disabled:S.post,children:[(0,a.jsx)(_.A,{size:18,style:{marginRight:"8px"}}),S.post?"Posting...":"Post Question"]})]}):(0,a.jsxs)("div",{className:u().loginPrompt,children:[(0,a.jsx)(p,{size:24}),(0,a.jsxs)("p",{children:["Please ",(0,a.jsx)(l(),{href:"/auth/login",children:"login"})," to post a question"]})]})]}),(0,a.jsxs)("div",{className:u().rightColumn,children:[(0,a.jsx)("h1",{className:u().heading,children:"Recent Questions"}),(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.role)==="alumni"&&(0,a.jsxs)("div",{className:u().filterInfo,children:["Showing ",o.length," questions matching your skills"]}),o.map(e=>{var s,i;return(0,a.jsxs)("div",{className:u().questionThread,children:[(0,a.jsxs)("div",{className:u().voteColumn,children:[(0,a.jsx)("button",{className:"".concat(u().voteButton," ").concat(G(e,"up")?u().voted:""),onClick:()=>O(e._id,"up"),disabled:S.votes[e._id],children:(0,a.jsx)(h,{size:20})}),(0,a.jsx)("span",{className:u().voteCount,children:e.voteCount||0}),(0,a.jsx)("button",{className:"".concat(u().voteButton," ").concat(G(e,"down")?u().voted:""),onClick:()=>O(e._id,"down"),disabled:S.votes[e._id],children:(0,a.jsx)(m,{size:20})})]}),(0,a.jsx)("div",{className:u().questionContent,children:z===e._id?(0,a.jsxs)("div",{className:u().editForm,children:[(0,a.jsx)("input",{type:"text",value:R.title,onChange:e=>I(t=>({...t,title:e.target.value})),className:u().input}),(0,a.jsx)("textarea",{value:R.description,onChange:e=>I(t=>({...t,description:e.target.value})),rows:4,className:u().textarea}),(0,a.jsxs)("div",{className:u().buttonRow,children:[(0,a.jsxs)("button",{onClick:()=>X(e._id),className:u().saveBtn,disabled:S.edit,children:[(0,a.jsx)(v.A,{size:16,style:{marginRight:"8px"}}),S.edit?"Saving...":"Save Changes"]}),(0,a.jsxs)("button",{onClick:()=>B(null),className:u().cancelBtn,children:[(0,a.jsx)(g.A,{size:16})," Cancel"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:u().questionHeader,children:[(0,a.jsxs)("div",{className:u().userInfo,children:[(0,a.jsx)("img",{src:L(e.postedBy||{}),alt:W(e.postedBy||{}),className:u().userAvatar}),(0,a.jsxs)("div",{className:u().userMeta,children:[(0,a.jsx)("h3",{className:u().questionTitle,children:e.title}),(0,a.jsxs)("div",{className:u().questionMeta,children:[(0,a.jsxs)("span",{className:u().metaItem,children:[(0,a.jsx)(y.A,{size:14}),W(e.postedBy||{})]}),(0,a.jsxs)("span",{className:u().metaItem,children:[(0,a.jsx)(x.A,{size:14}),T(e.createdAt)]}),(0,a.jsxs)("span",{className:u().metaItem,children:[(0,a.jsx)(j.A,{size:14}),(null===(s=e.replies)||void 0===s?void 0:s.length)||0," replies"]}),(0,a.jsx)("span",{className:"".concat(u().metaItem," ").concat(u().category),style:{backgroundColor:"".concat(q(e.category),"20"),color:q(e.category),border:"1px solid ".concat(q(e.category),"40")},children:"Pending"===e.category?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{size:14,className:u().spinner}),"Classifying..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.A,{size:14}),e.category]})})]})]})]}),Y(e)&&(0,a.jsxs)("div",{className:u().questionActions,children:[(0,a.jsxs)("button",{onClick:()=>X(e._id),className:u().actionButton,children:[(0,a.jsx)(P.A,{size:14})," Edit"]}),(0,a.jsxs)("button",{onClick:()=>U(e._id),className:"".concat(u().actionButton," ").concat(u().deleteButton),disabled:S.delete[e._id],children:[(0,a.jsx)(k.A,{size:14}),S.delete[e._id]?"Deleting...":"Delete"]})]})]}),(0,a.jsx)("p",{className:u().questionDescription,children:e.description||"No additional details provided."}),(0,a.jsxs)("div",{className:u().repliesSection,children:[null===(i=e.replies)||void 0===i?void 0:i.map(e=>(0,a.jsx)("div",{className:u().replyThread,children:(0,a.jsxs)("div",{className:u().replyContent,children:[(0,a.jsxs)("div",{className:u().replyMeta,children:[(0,a.jsxs)("span",{className:u().metaItem,children:[(0,a.jsx)(y.A,{size:12}),W(e.postedBy)]}),(0,a.jsxs)("span",{className:u().metaItem,children:[(0,a.jsx)(x.A,{size:12}),T(e.createdAt)]})]}),(0,a.jsx)("p",{children:e.text})]})},e._id)),t?(0,a.jsxs)("div",{className:u().replyForm,children:[(0,a.jsx)("input",{type:"text",placeholder:"Write your reply...",value:Q[e._id]||"",onChange:t=>w(s=>({...s,[e._id]:t.target.value})),className:u().replyInput}),(0,a.jsxs)("button",{onClick:()=>D(e._id),className:u().replyButton,disabled:S.replies[e._id],children:[(0,a.jsx)(_.A,{size:14}),S.replies[e._id]?"Sending...":"Reply"]})]}):(0,a.jsx)("div",{className:u().loginPrompt,children:(0,a.jsxs)("p",{children:["Please ",(0,a.jsx)(l(),{href:"/auth/login",children:"login"})," to reply"]})})]})]})})]},e._id)})]})]})}},2783:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/questions",function(){return s(2731)}])},2972:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},5037:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},7496:e=>{e.exports={pageContainer:"QuestionsPage_pageContainer__NnhKX",leftColumn:"QuestionsPage_leftColumn__uYy85",leftColumnHeading:"QuestionsPage_leftColumnHeading__syeLU",heading:"QuestionsPage_heading__5mNVV",newQuestionCard:"QuestionsPage_newQuestionCard__V_Fdl",questionThread:"QuestionsPage_questionThread__VRbbq",voteColumn:"QuestionsPage_voteColumn__kN53x",voteButton:"QuestionsPage_voteButton__j9ZI0",voted:"QuestionsPage_voted__ynxay",voteCount:"QuestionsPage_voteCount__CG9mJ",questionContent:"QuestionsPage_questionContent__1xfTx",questionHeader:"QuestionsPage_questionHeader__9haWO",questionTitle:"QuestionsPage_questionTitle__cArwe",questionMeta:"QuestionsPage_questionMeta__VAs7I",metaItem:"QuestionsPage_metaItem__3MGgB",category:"QuestionsPage_category__WmlqP",questionDescription:"QuestionsPage_questionDescription__rgvX2",questionActions:"QuestionsPage_questionActions__EPAuo",actionButton:"QuestionsPage_actionButton__zrUmZ",postButton:"QuestionsPage_postButton__FzFhR",repliesSection:"QuestionsPage_repliesSection__3ds5x",replyThread:"QuestionsPage_replyThread__rwCqi",replyContent:"QuestionsPage_replyContent__Y__rP",replyMeta:"QuestionsPage_replyMeta__HA6te",replyForm:"QuestionsPage_replyForm__imsw8",replyInput:"QuestionsPage_replyInput__U8z1Y",replyButton:"QuestionsPage_replyButton__5KOQ7",input:"QuestionsPage_input__aMyWN",textarea:"QuestionsPage_textarea__Pv5_4",loginPrompt:"QuestionsPage_loginPrompt__bUH5_",userInfo:"QuestionsPage_userInfo__3oz_m",userAvatar:"QuestionsPage_userAvatar__qmjlw",userMeta:"QuestionsPage_userMeta__Lzf7u",deleteButton:"QuestionsPage_deleteButton__avZtG",spinner:"QuestionsPage_spinner__gzEHf",spin:"QuestionsPage_spin__lEimu",filterInfo:"QuestionsPage_filterInfo__Ec9kb"}},7959:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[290,40,636,593,792],()=>t(2783)),_N_E=e.O()}]);