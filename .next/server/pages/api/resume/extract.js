"use strict";(()=>{var e={};e.id=5388,e.ids=[5388],e.modules={416:e=>{e.exports=require("pdf-parse")},3480:(e,t,r)=>{e.exports=r(5600)},3657:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>f,default:()=>d});var i=r(7313),o=r(416),n=r.n(o),s=r(9748),c=r.n(s),u=r(3873),l=r.n(u),p=e([i]);i=(p.then?(await p)():p)[0];let f={api:{bodyParser:!1}},m=async e=>await c().readFile(e),h=async e=>{try{return(await n()(e)).text}catch(e){throw Error(`PDF extraction failed: ${e.message}`)}},P=async(e,t)=>{try{throw Error("Word document processing is not yet implemented")}catch(e){throw Error(`Word extraction failed: ${e.message}`)}};async function d(e,t){if("POST"!==e.method)return t.status(405).json({success:!1,error:"Method not allowed"});try{let r=l().join(process.cwd(),"tmp");await c().mkdir(r,{recursive:!0});let a={uploadDir:r,keepExtensions:!0,maxFileSize:0xa00000},[o,n]=await new Promise((t,r)=>{(0,i.default)(a).parse(e,(e,a,i)=>{e&&r(e),t([a,i])})}),s=n.file?.[0]||n.file;if(!s)return t.status(400).json({success:!1,error:"No file uploaded"});let u=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];if(!u.includes(s.mimetype))return t.status(400).json({success:!1,error:`Invalid file type. Supported types: ${u.join(", ")}`});try{let e;let r=await m(s.filepath);if(!(e="application/pdf"===s.mimetype?await h(r):await P(r,s.mimetype))||0===e.trim().length)throw Error("No text could be extracted from the file");return await c().unlink(s.filepath).catch(console.error),t.status(200).json({success:!0,text:e.trim()})}catch(e){return s?.filepath&&await c().unlink(s.filepath).catch(console.error),t.status(500).json({success:!1,error:e.message})}}catch(e){return console.error("Server error:",e),t.status(500).json({success:!1,error:"Internal server error",details:e.message})}}a()}catch(e){a(e)}})},3873:e=>{e.exports=require("path")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},7313:e=>{e.exports=import("formidable")},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},8899:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>u,routeModule:()=>p});var i=r(3480),o=r(8667),n=r(6435),s=r(3657),c=e([s]);s=(c.then?(await c)():c)[0];let u=(0,n.M)(s,"default"),l=(0,n.M)(s,"config"),p=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/resume/extract",pathname:"/api/resume/extract",bundlePath:"",filename:""},userland:s});a()}catch(e){a(e)}})},9748:e=>{e.exports=require("fs/promises")}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=8899);module.exports=r})();