exports.id=1039,exports.ids=[1039],exports.modules={1039:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(8732),i=s(2015),n=s(2386);let r=(0,n.A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),l=(0,n.A)("minimize-2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var d=s(9741),o=s(5281),h=s(6249),c=s.n(h);function m(){let[e,a]=(0,i.useState)(!1),[s,n]=(0,i.useState)([]),[h,m]=(0,i.useState)(""),[u,p]=(0,i.useState)(!1),b=(0,i.useRef)(null),x={warning:{color:"#f59e0b",fontSize:"0.875rem",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},error:{color:"#ef4444",fontSize:"0.875rem",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},note:{color:"#6b7280",fontSize:"0.875rem",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"}},g=async e=>{if(e.preventDefault(),!h.trim()||u)return;let a=h.trim();m(""),p(!0);let s={id:Date.now(),text:a,sender:"user",timestamp:new Date().toISOString()};n(e=>[...e,s]);try{let e=await fetch("/api/reyn-assistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userMessage:a,timestamp:new Date().toISOString(),userLogin:"sr4jan"})}),s=await e.json();if(!e.ok){if(s.moderated&&"high"===s.severity){n(e=>[...e,{id:Date.now(),text:s.error,sender:"ai",isError:!0,moderated:!0,severity:s.severity,timestamp:new Date().toISOString()}]);return}throw Error(s.error||"AI request failed")}n(e=>[...e,{id:Date.now(),text:s.response,sender:"ai",moderated:s.moderated,severity:s.severity,warning:s.warning,note:s.note,timestamp:new Date().toISOString()}])}catch(e){console.error("Error:",e),n(a=>[...a,{id:Date.now(),text:e.message||"Sorry, I encountered an error. Please try again.",sender:"ai",isError:!0,timestamp:new Date().toISOString()}])}finally{p(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:`${c().chatBubble} ${e?c().hidden:""}`,onClick:()=>a(!0),"aria-label":"Open AI Chat",children:(0,t.jsx)(r,{size:24})}),e&&(0,t.jsxs)("div",{className:c().chatWindow,children:[(0,t.jsxs)("div",{className:c().chatHeader,children:[(0,t.jsxs)("div",{className:c().headerInfo,children:[(0,t.jsx)(r,{size:20}),(0,t.jsx)("span",{children:"Reyn AI Assistant"})]}),(0,t.jsxs)("div",{className:c().headerActions,children:[(0,t.jsx)("button",{onClick:()=>a(!1),className:c().headerButton,"aria-label":"Minimize chat",children:(0,t.jsx)(l,{size:18})}),(0,t.jsx)("button",{onClick:()=>{a(!1),n([])},className:c().headerButton,"aria-label":"Close chat",children:(0,t.jsx)(d.A,{size:18})})]})]}),(0,t.jsxs)("div",{className:c().messagesContainer,children:[0===s.length&&(0,t.jsxs)("div",{className:c().welcomeMessage,children:[(0,t.jsx)(r,{size:32}),(0,t.jsx)("h3",{children:"Hello! I'm Reyn \uD83D\uDC4B"}),(0,t.jsx)("p",{children:"How can I help you today?"})]}),s.map(e=>{let a=`${c().message} ${"user"===e.sender?c().userMessage:c().aiMessage} ${e.isError?c().errorMessage:""}`;return(0,t.jsxs)("div",{className:a,children:["ai"===e.sender&&(0,t.jsx)("div",{className:c().aiAvatar,children:(0,t.jsx)(r,{size:16})}),(0,t.jsxs)("div",{className:c().messageWrapper,children:[(0,t.jsx)("div",{className:c().messageContent,children:e.text}),e.warning&&(0,t.jsxs)("div",{style:x.warning,children:["⚠️ ",e.warning]}),e.note&&(0,t.jsxs)("div",{style:x.note,children:["ℹ️ ",e.note]}),e.moderated&&"high"===e.severity&&(0,t.jsx)("div",{style:x.error,children:"\uD83D\uDEAB This message was blocked due to inappropriate content"})]})]},e.id)}),u&&(0,t.jsxs)("div",{className:`${c().message} ${c().aiMessage}`,children:[(0,t.jsx)("div",{className:c().aiAvatar,children:(0,t.jsx)(r,{size:16})}),(0,t.jsxs)("div",{className:c().typingIndicator,children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})]}),(0,t.jsx)("div",{ref:b})]}),(0,t.jsxs)("form",{onSubmit:g,className:c().inputContainer,children:[(0,t.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Type a message...",className:c().input,disabled:u}),(0,t.jsx)("button",{type:"submit",className:c().sendButton,disabled:u||!h.trim(),"aria-label":"Send message",children:(0,t.jsx)(o.A,{size:18})})]})]})]})}},5281:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(2386).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},6249:e=>{e.exports={chatBubble:"AiChatBubble_chatBubble__SbUBm",hidden:"AiChatBubble_hidden__2KqJW",chatWindow:"AiChatBubble_chatWindow__3d_dI",slideIn:"AiChatBubble_slideIn__OY4zk",chatHeader:"AiChatBubble_chatHeader__WJNLd",headerInfo:"AiChatBubble_headerInfo__fL5tR",headerActions:"AiChatBubble_headerActions__NavbK",headerButton:"AiChatBubble_headerButton__6bZbK",messagesContainer:"AiChatBubble_messagesContainer__8GSLg",welcomeMessage:"AiChatBubble_welcomeMessage___TT2n",message:"AiChatBubble_message__HXUBP",messageAppear:"AiChatBubble_messageAppear__AwUH5",userMessage:"AiChatBubble_userMessage__UNnE5",aiMessage:"AiChatBubble_aiMessage__wEzAF",aiAvatar:"AiChatBubble_aiAvatar__qG5lP",messageContent:"AiChatBubble_messageContent__Uf2bn",typingIndicator:"AiChatBubble_typingIndicator__MGW8c",typing:"AiChatBubble_typing__xoak2",inputContainer:"AiChatBubble_inputContainer__ADWeZ",input:"AiChatBubble_input__7vpRG",sendButton:"AiChatBubble_sendButton__bTs1I"}}};