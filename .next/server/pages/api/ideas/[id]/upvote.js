"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ideas/[id]/upvote";
exports.ids = ["pages/api/ideas/[id]/upvote"];
exports.modules = {

/***/ "(api-node)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n// lib/mongodb.js\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable in .env.local\");\n}\n/* \r\n  Global is used here to maintain a cached connection across hot reloads in development.\r\n  This prevents multiple connections during development.\r\n*/ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI).then((mongoose)=>mongoose);\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9tb25nb2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGlCQUFpQjtBQUVlO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRUE7OztBQUdBLEdBQ0EsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBQ0EsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkJILE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFVLElBQUksQ0FBQyxDQUFDWCxXQUFhQTtJQUNwRTtJQUNBSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNsQyxPQUFPSCxPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc3JhamFcXE9uZURyaXZlXFxEZXNrdG9wXFxNeUNvZGVCYXNlXFxhbG1hLWxpbmstdjJcXGxpYlxcbW9uZ29kYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvbW9uZ29kYi5qc1xyXG5cclxuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbiAuZW52LmxvY2FsXCIpO1xyXG59XHJcblxyXG4vKiBcclxuICBHbG9iYWwgaXMgdXNlZCBoZXJlIHRvIG1haW50YWluIGEgY2FjaGVkIGNvbm5lY3Rpb24gYWNyb3NzIGhvdCByZWxvYWRzIGluIGRldmVsb3BtZW50LlxyXG4gIFRoaXMgcHJldmVudHMgbXVsdGlwbGUgY29ubmVjdGlvbnMgZHVyaW5nIGRldmVsb3BtZW50LlxyXG4qL1xyXG5sZXQgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlO1xyXG5cclxuaWYgKCFjYWNoZWQpIHtcclxuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCkge1xyXG4gIGlmIChjYWNoZWQuY29ubikge1xyXG4gICAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG4gIH1cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkkpLnRoZW4oKG1vbmdvb3NlKSA9PiBtb25nb29zZSk7XHJcbiAgfVxyXG4gIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJjb25uZWN0IiwidGhlbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api-node)/./models/Idea.js":
/*!************************!*\
  !*** ./models/Idea.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst IdeaSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        required: [\n            true,\n            'Title is required'\n        ],\n        trim: true,\n        maxLength: [\n            100,\n            'Title cannot be longer than 100 characters'\n        ]\n    },\n    description: {\n        type: String,\n        required: [\n            true,\n            'Description is required'\n        ],\n        trim: true\n    },\n    postedBy: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'User',\n        required: [\n            true,\n            'User ID is required'\n        ]\n    },\n    collegeId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'College',\n        required: true\n    },\n    tags: {\n        type: [\n            String\n        ],\n        default: []\n    },\n    upvotes: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    upvotedBy: {\n        type: [\n            String\n        ],\n        default: []\n    }\n}, {\n    timestamps: true\n});\n// Clear existing model if it exists\n(mongoose__WEBPACK_IMPORTED_MODULE_0___default().models) = {};\n// Create new model\nconst Idea = mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Idea', IdeaSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Idea);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy9JZGVhLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxhQUFhLElBQUlELHdEQUFlLENBQUM7SUFDckNHLE9BQU87UUFDTEMsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBb0I7UUFDckNDLE1BQU07UUFDTkMsV0FBVztZQUFDO1lBQUs7U0FBNkM7SUFDaEU7SUFDQUMsYUFBYTtRQUNYTCxNQUFNQztRQUNOQyxVQUFVO1lBQUM7WUFBTTtTQUEwQjtRQUMzQ0MsTUFBTTtJQUNSO0lBQ0FHLFVBQVU7UUFDUk4sTUFBTUosd0RBQWUsQ0FBQ1csS0FBSyxDQUFDQyxRQUFRO1FBQ3BDQyxLQUFLO1FBQ0xQLFVBQVU7WUFBQztZQUFNO1NBQXNCO0lBQ3pDO0lBQ0FRLFdBQVc7UUFDVFYsTUFBTUosd0RBQWUsQ0FBQ1csS0FBSyxDQUFDQyxRQUFRO1FBQ3BDQyxLQUFLO1FBQ0xQLFVBQVU7SUFDWjtJQUNBUyxNQUFNO1FBQ0pYLE1BQU07WUFBQ0M7U0FBTztRQUNkVyxTQUFTLEVBQUU7SUFDYjtJQUNBQyxTQUFTO1FBQ1BiLE1BQU1jO1FBQ05GLFNBQVM7UUFDVEcsS0FBSztJQUNQO0lBQ0FDLFdBQVc7UUFDVGhCLE1BQU07WUFBQ0M7U0FBTztRQUNkVyxTQUFTLEVBQUU7SUFDYjtBQUNGLEdBQUc7SUFDREssWUFBWTtBQUNkO0FBRUEsb0NBQW9DO0FBQ3BDckIsd0RBQWUsR0FBRyxDQUFDO0FBRW5CLG1CQUFtQjtBQUNuQixNQUFNdUIsT0FBT3ZCLHFEQUFjLENBQUMsUUFBUUM7QUFDcEMsaUVBQWVzQixJQUFJQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHNyYWphXFxPbmVEcml2ZVxcRGVza3RvcFxcTXlDb2RlQmFzZVxcYWxtYS1saW5rLXYyXFxtb2RlbHNcXElkZWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IElkZWFTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICB0aXRsZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVGl0bGUgaXMgcmVxdWlyZWQnXSxcclxuICAgIHRyaW06IHRydWUsXHJcbiAgICBtYXhMZW5ndGg6IFsxMDAsICdUaXRsZSBjYW5ub3QgYmUgbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnXVxyXG4gIH0sXHJcbiAgZGVzY3JpcHRpb246IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ0Rlc2NyaXB0aW9uIGlzIHJlcXVpcmVkJ10sXHJcbiAgICB0cmltOiB0cnVlXHJcbiAgfSxcclxuICBwb3N0ZWRCeToge1xyXG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCAgLy8gQ2hhbmdlZCBiYWNrIHRvIE9iamVjdElkXHJcbiAgICByZWY6ICdVc2VyJyxcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1VzZXIgSUQgaXMgcmVxdWlyZWQnXVxyXG4gIH0sXHJcbiAgY29sbGVnZUlkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsICAvLyBDaGFuZ2VkIHRvIE9iamVjdElkXHJcbiAgICByZWY6ICdDb2xsZWdlJyxcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICB0YWdzOiB7XHJcbiAgICB0eXBlOiBbU3RyaW5nXSxcclxuICAgIGRlZmF1bHQ6IFtdXHJcbiAgfSxcclxuICB1cHZvdGVzOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICBkZWZhdWx0OiAwLFxyXG4gICAgbWluOiAwXHJcbiAgfSxcclxuICB1cHZvdGVkQnk6IHtcclxuICAgIHR5cGU6IFtTdHJpbmddLFxyXG4gICAgZGVmYXVsdDogW11cclxuICB9XHJcbn0sIHtcclxuICB0aW1lc3RhbXBzOiB0cnVlXHJcbn0pO1xyXG5cclxuLy8gQ2xlYXIgZXhpc3RpbmcgbW9kZWwgaWYgaXQgZXhpc3RzXHJcbm1vbmdvb3NlLm1vZGVscyA9IHt9O1xyXG5cclxuLy8gQ3JlYXRlIG5ldyBtb2RlbFxyXG5jb25zdCBJZGVhID0gbW9uZ29vc2UubW9kZWwoJ0lkZWEnLCBJZGVhU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgSWRlYTsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJJZGVhU2NoZW1hIiwiU2NoZW1hIiwidGl0bGUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ0cmltIiwibWF4TGVuZ3RoIiwiZGVzY3JpcHRpb24iLCJwb3N0ZWRCeSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJjb2xsZWdlSWQiLCJ0YWdzIiwiZGVmYXVsdCIsInVwdm90ZXMiLCJOdW1iZXIiLCJtaW4iLCJ1cHZvdGVkQnkiLCJ0aW1lc3RhbXBzIiwibW9kZWxzIiwiSWRlYSIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./models/Idea.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fideas%2F%5Bid%5D%2Fupvote&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cideas%5C%5Bid%5D%5Cupvote.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fideas%2F%5Bid%5D%2Fupvote&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cideas%5C%5Bid%5D%5Cupvote.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_ideas_id_upvote_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\ideas\\[id]\\upvote.js */ \"(api-node)/./pages/api/ideas/[id]/upvote.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ideas_id_upvote_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ideas_id_upvote_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/ideas/[id]/upvote\",\n        pathname: \"/api/ideas/[id]/upvote\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_ideas_id_upvote_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGaWRlYXMlMkYlNUJpZCU1RCUyRnVwdm90ZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDaWRlYXMlNUMlNUJpZCU1RCU1Q3Vwdm90ZS5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNpRTtBQUNqRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDBEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGlkZWFzXFxcXFtpZF1cXFxcdXB2b3RlLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pZGVhcy9baWRdL3Vwdm90ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2lkZWFzL1tpZF0vdXB2b3RlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fideas%2F%5Bid%5D%2Fupvote&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cideas%5C%5Bid%5D%5Cupvote.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/ideas/[id]/upvote.js":
/*!****************************************!*\
  !*** ./pages/api/ideas/[id]/upvote.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/mongodb */ \"(api-node)/./lib/mongodb.js\");\n/* harmony import */ var _models_Idea__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/Idea */ \"(api-node)/./models/Idea.js\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function handler(req, res) {\n    if (req.method !== 'PATCH') {\n        res.setHeader('Allow', [\n            'PATCH'\n        ]);\n        return res.status(405).json({\n            success: false,\n            message: `Method ${req.method} Not Allowed`\n        });\n    }\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const { id } = req.query;\n        const { userId } = req.body;\n        if (!userId) {\n            return res.status(400).json({\n                success: false,\n                message: \"User ID is required\"\n            });\n        }\n        const idea = await _models_Idea__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(new mongodb__WEBPACK_IMPORTED_MODULE_2__.ObjectId(id));\n        if (!idea) {\n            return res.status(404).json({\n                success: false,\n                message: \"Idea not found\"\n            });\n        }\n        // Initialize upvotedBy if it doesn't exist\n        if (!Array.isArray(idea.upvotedBy)) {\n            idea.upvotedBy = [];\n        }\n        const hasUpvoted = idea.upvotedBy.includes(userId);\n        if (hasUpvoted) {\n            // Remove upvote\n            idea.upvotedBy = idea.upvotedBy.filter((id)=>id !== userId);\n            idea.upvotes = Math.max(0, idea.upvotes - 1);\n        } else {\n            // Add upvote\n            idea.upvotedBy.push(userId);\n            idea.upvotes = (idea.upvotes || 0) + 1;\n        }\n        await idea.save();\n        return res.status(200).json({\n            success: true,\n            message: hasUpvoted ? 'Upvote removed' : 'Idea upvoted successfully',\n            idea: idea.toObject()\n        });\n    } catch (error) {\n        console.error('Upvote error:', error);\n        return res.status(500).json({\n            success: false,\n            message: \"Failed to update upvote\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9pZGVhcy9baWRdL3Vwdm90ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUNMO0FBQ0U7QUFFcEIsZUFBZUcsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUlFLE1BQU0sS0FBSyxTQUFTO1FBQzFCRCxJQUFJRSxTQUFTLENBQUMsU0FBUztZQUFDO1NBQVE7UUFDaEMsT0FBT0YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUQyxTQUFTLENBQUMsT0FBTyxFQUFFUCxJQUFJRSxNQUFNLENBQUMsWUFBWSxDQUFDO1FBQzdDO0lBQ0Y7SUFFQSxJQUFJO1FBQ0YsTUFBTU4sd0RBQVNBO1FBQ2YsTUFBTSxFQUFFWSxFQUFFLEVBQUUsR0FBR1IsSUFBSVMsS0FBSztRQUN4QixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHVixJQUFJVyxJQUFJO1FBRTNCLElBQUksQ0FBQ0QsUUFBUTtZQUNYLE9BQU9ULElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE1BQU1LLE9BQU8sTUFBTWYsNkRBQWEsQ0FBQyxJQUFJQyw2Q0FBUUEsQ0FBQ1U7UUFFOUMsSUFBSSxDQUFDSSxNQUFNO1lBQ1QsT0FBT1gsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLFNBQVM7Z0JBQ1RDLFNBQVM7WUFDWDtRQUNGO1FBRUEsMkNBQTJDO1FBQzNDLElBQUksQ0FBQ08sTUFBTUMsT0FBTyxDQUFDSCxLQUFLSSxTQUFTLEdBQUc7WUFDbENKLEtBQUtJLFNBQVMsR0FBRyxFQUFFO1FBQ3JCO1FBRUEsTUFBTUMsYUFBYUwsS0FBS0ksU0FBUyxDQUFDRSxRQUFRLENBQUNSO1FBRTNDLElBQUlPLFlBQVk7WUFDZCxnQkFBZ0I7WUFDaEJMLEtBQUtJLFNBQVMsR0FBR0osS0FBS0ksU0FBUyxDQUFDRyxNQUFNLENBQUNYLENBQUFBLEtBQU1BLE9BQU9FO1lBQ3BERSxLQUFLUSxPQUFPLEdBQUdDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHVixLQUFLUSxPQUFPLEdBQUc7UUFDNUMsT0FBTztZQUNMLGFBQWE7WUFDYlIsS0FBS0ksU0FBUyxDQUFDTyxJQUFJLENBQUNiO1lBQ3BCRSxLQUFLUSxPQUFPLEdBQUcsQ0FBQ1IsS0FBS1EsT0FBTyxJQUFJLEtBQUs7UUFDdkM7UUFFQSxNQUFNUixLQUFLWSxJQUFJO1FBRWYsT0FBT3ZCLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVEMsU0FBU1UsYUFBYSxtQkFBbUI7WUFDekNMLE1BQU1BLEtBQUthLFFBQVE7UUFDckI7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlCQUFpQkE7UUFDL0IsT0FBT3pCLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVEMsU0FBUztRQUNYO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzcmFqYVxcT25lRHJpdmVcXERlc2t0b3BcXE15Q29kZUJhc2VcXGFsbWEtbGluay12MlxccGFnZXNcXGFwaVxcaWRlYXNcXFtpZF1cXHVwdm90ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL21vbmdvZGInO1xyXG5pbXBvcnQgSWRlYSBmcm9tICdAL21vZGVscy9JZGVhJztcclxuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tICdtb25nb2RiJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BBVENIJykge1xyXG4gICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ1BBVENIJ10pO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIElEIGlzIHJlcXVpcmVkXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRlYSA9IGF3YWl0IElkZWEuZmluZEJ5SWQobmV3IE9iamVjdElkKGlkKSk7XHJcbiAgICBcclxuICAgIGlmICghaWRlYSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwiSWRlYSBub3QgZm91bmRcIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbml0aWFsaXplIHVwdm90ZWRCeSBpZiBpdCBkb2Vzbid0IGV4aXN0XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaWRlYS51cHZvdGVkQnkpKSB7XHJcbiAgICAgIGlkZWEudXB2b3RlZEJ5ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFzVXB2b3RlZCA9IGlkZWEudXB2b3RlZEJ5LmluY2x1ZGVzKHVzZXJJZCk7XHJcblxyXG4gICAgaWYgKGhhc1Vwdm90ZWQpIHtcclxuICAgICAgLy8gUmVtb3ZlIHVwdm90ZVxyXG4gICAgICBpZGVhLnVwdm90ZWRCeSA9IGlkZWEudXB2b3RlZEJ5LmZpbHRlcihpZCA9PiBpZCAhPT0gdXNlcklkKTtcclxuICAgICAgaWRlYS51cHZvdGVzID0gTWF0aC5tYXgoMCwgaWRlYS51cHZvdGVzIC0gMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBBZGQgdXB2b3RlXHJcbiAgICAgIGlkZWEudXB2b3RlZEJ5LnB1c2godXNlcklkKTtcclxuICAgICAgaWRlYS51cHZvdGVzID0gKGlkZWEudXB2b3RlcyB8fCAwKSArIDE7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgaWRlYS5zYXZlKCk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogaGFzVXB2b3RlZCA/ICdVcHZvdGUgcmVtb3ZlZCcgOiAnSWRlYSB1cHZvdGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGlkZWE6IGlkZWEudG9PYmplY3QoKVxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Vwdm90ZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIHVwdm90ZVwiXHJcbiAgICB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiZGJDb25uZWN0IiwiSWRlYSIsIk9iamVjdElkIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInNldEhlYWRlciIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImlkIiwicXVlcnkiLCJ1c2VySWQiLCJib2R5IiwiaWRlYSIsImZpbmRCeUlkIiwiQXJyYXkiLCJpc0FycmF5IiwidXB2b3RlZEJ5IiwiaGFzVXB2b3RlZCIsImluY2x1ZGVzIiwiZmlsdGVyIiwidXB2b3RlcyIsIk1hdGgiLCJtYXgiLCJwdXNoIiwic2F2ZSIsInRvT2JqZWN0IiwiZXJyb3IiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/ideas/[id]/upvote.js\n");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fideas%2F%5Bid%5D%2Fupvote&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cideas%5C%5Bid%5D%5Cupvote.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();