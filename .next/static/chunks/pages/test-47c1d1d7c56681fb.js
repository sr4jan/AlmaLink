(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{6316:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/test",function(){return t(9428)}])},9428:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var o=t(7876),n=t(4232),s=t(7685),i={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(e){var r=function(e){if("number"==typeof e)return{value:e,unit:"px"};var r,t=(e.match(/^[0-9.]*/)||"").toString();r=t.includes(".")?parseFloat(t):parseInt(t,10);var o=(e.match(/[^0-9]*$/)||"").toString();return i[o]?{value:r,unit:o}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(r,"px.")),{value:r,unit:"px"})}(e);return"".concat(r.value).concat(r.unit)}var l=function(){return(l=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},c=function(e,r){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>r.indexOf(o)&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)0>r.indexOf(o[n])&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]]);return t},d=function(e,r,t){var o="react-spinners-".concat(e,"-").concat(t);if("undefined"==typeof window||!window.document)return o;var n=document.createElement("style");document.head.appendChild(n);var s=n.sheet,i="\n    @keyframes ".concat(o," {\n      ").concat(r,"\n    }\n  ");return s&&s.insertRule(i,0),o}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");let u=function(e){var r=e.loading,t=e.color,o=void 0===t?"#000000":t,s=e.speedMultiplier,i=e.cssOverride,u=e.size,p=void 0===u?35:u,m=c(e,["loading","color","speedMultiplier","cssOverride","size"]),g=l({background:"transparent !important",width:a(p),height:a(p),borderRadius:"100%",border:"2px solid",borderTopColor:o,borderBottomColor:"transparent",borderLeftColor:o,borderRightColor:o,display:"inline-block",animation:"".concat(d," ").concat(.75/(void 0===s?1:s),"s 0s infinite linear"),animationFillMode:"both"},void 0===i?{}:i);return void 0===r||r?n.createElement("span",l({style:g},m)):null};function p(){let[e,r]=(0,n.useState)(""),[t,i]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[p,m]=(0,n.useState)(""),[g,h]=(0,n.useState)(!1),f=async()=>{h(!0);try{let e=await fetch("/api/test-get");if(!e.ok)throw Error("Failed to fetch messages");let r=await e.json();(null==r?void 0:r.success)?i(r.data):s.oR.error((null==r?void 0:r.error)||"Something went wrong!")}catch(e){console.error("Fetch error:",e),s.oR.error(e.message||"Something went wrong!")}finally{h(!1)}};(0,n.useEffect)(()=>{f()},[]);let y=async t=>{if(t.preventDefault(),!e.trim()){s.oR.error("Message cannot be empty!");return}l(!0);try{let t=await fetch("/api/test-add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!t.ok)throw Error("Failed to send message");let o=await t.json();(null==o?void 0:o.success)?(r(""),f(),s.oR.success("Message sent successfully! \uD83D\uDE80")):s.oR.error((null==o?void 0:o.error)||"Something went wrong!")}catch(e){console.error("Submit error:",e),s.oR.error(e.message||"Something went wrong!")}finally{l(!1)}},w=async e=>{if(window.confirm("Are you sure you want to delete this message?"))try{let r=await fetch("/api/test-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!r.ok)throw Error("Failed to delete message");let t=await r.json();(null==t?void 0:t.success)?(f(),s.oR.success("Message deleted successfully! \uD83D\uDDD1️")):s.oR.error((null==t?void 0:t.error)||"Something went wrong!")}catch(e){console.error("Delete error:",e),s.oR.error(e.message||"Something went wrong!")}},b=(e,r)=>{d(e),m(r)},v=async e=>{if(!p.trim()){s.oR.error("Edited message cannot be empty!");return}try{let r=await fetch("/api/test-update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,newMessage:p})});if(!r.ok)throw Error("Failed to update message");let t=await r.json();(null==t?void 0:t.success)?(d(null),m(""),f(),s.oR.success("Message updated successfully! ✨")):s.oR.error((null==t?void 0:t.error)||"Something went wrong!")}catch(e){console.error("Update error:",e),s.oR.error(e.message||"Something went wrong!")}};return(0,o.jsxs)("div",{style:{padding:"2rem"},children:[(0,o.jsx)(s.l$,{position:"top-center",reverseOrder:!1}),(0,o.jsx)("h1",{children:"Test Page"}),(0,o.jsxs)("form",{onSubmit:y,style:{marginBottom:"2rem"},children:[(0,o.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Enter your message",style:{padding:"0.5rem",width:"300px"},disabled:a}),(0,o.jsx)("button",{type:"submit",style:{marginLeft:"1rem",padding:"0.5rem 1rem"},disabled:a,children:a?(0,o.jsx)(u,{size:20,color:"#ffffff"}):"Send"})]}),(0,o.jsx)("h2",{children:"All Messages:"}),g?(0,o.jsx)("p",{children:"Loading messages..."}):0===t.length?(0,o.jsx)("p",{children:"No messages yet. Be the first to add one!"}):(0,o.jsx)("ul",{style:{listStyle:"none",padding:0},children:t.map(e=>(0,o.jsx)("li",{style:{marginBottom:"1rem",padding:"1rem",border:"1px solid #ccc",borderRadius:"8px"},children:c===e._id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),style:{padding:"0.25rem",width:"70%"}}),(0,o.jsx)("button",{onClick:()=>v(e._id),style:{marginLeft:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"#2ecc71",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"}),(0,o.jsx)("button",{onClick:()=>d(null),style:{marginLeft:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"#e67e22",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{marginBottom:"0.5rem"},children:e.message}),(0,o.jsx)("small",{style:{color:"#777"},children:new Date(e.createdAt).toLocaleString()}),(0,o.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,o.jsx)("button",{onClick:()=>b(e._id,e.message),style:{marginRight:"0.5rem",backgroundColor:"#3498db",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer"},children:"Edit"}),(0,o.jsx)("button",{onClick:()=>w(e._id),style:{backgroundColor:"#e74c3c",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})},e._id))})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(6316)),_N_E=e.O()}]);